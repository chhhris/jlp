define.Class.overrideName.multi({"mobile.core.components.BaseList":"core.components.BaseList","mobile.core.components.Container":"core.components.Container","mobile.core.components.Image":"core.components.Image","mobile.core.components.TwitterFollow":"core.components.TwitterFollow","mobile.core.components.MenuButton":"core.components.MenuButton","mobile.core.components.Page":"core.components.Page","mobile.core.components.ServiceItem":"core.components.ServiceItem","mobile.core.components.SimpleButton":"core.components.SimpleButton","mobile.core.components.SiteStructure":"core.components.SiteStructure"}),function(){function e(){function e(t){return e.plugins.forEach(function(e){t=e.exec(t)}),t}return e.plugins=[],e.plugins.push({exec:function(e){return e.document_data.THEME_DATA&&(e.theme_data.THEME_DATA||(e.theme_data.THEME_DATA=e.document_data.THEME_DATA),delete e.document_data.THEME_DATA),e}}),e}define.resource("dataFixer",{fix:e()})}(),define.Class.overrideName.multi({"mobile.core.skins.InlineSkin":"skins.core.InlineSkin","mobile.core.skins.TwitterTweetSkin":"skins.core.TwitterTweetSkin","mobile.core.skins.ButtonSkin":"skins.core.ButtonSkin","mobile.core.skins.ContactItemSkin":"skins.core.ContactItemSkin","mobile.core.skins.ContactListSkin":"skins.core.ContactListSkin","mobile.core.skins.FacebookCommentSkin":"skins.core.FacebookCommentSkin","mobile.core.skins.GlobalMenuSkin":"skins.core.GlobalMenuSkin","mobile.core.skins.GooglePlusOneSkin":"skins.core.GooglePlusOneSkin","mobile.core.skins.HeaderSkin":"skins.core.HeaderSkin","mobile.core.skins.HomeButtonSkin":"skins.core.HomeButtonSkin","mobile.core.skins.ImageNewSkin":"skins.core.ImageNewSkin","mobile.core.skins.ImageSkin":"skins.core.ImageSkin","mobile.core.skins.MenuButtonSkin":"skins.core.MenuButtonSkin","mobile.core.skins.NetworkItemSkin":"skins.core.NetworkItemSkin","mobile.core.skins.NetworkListSkin":"skins.core.NetworkListSkin","mobile.core.skins.PageTitleSkin":"skins.core.PageTitleSkin","mobile.core.skins.PhotoFullScreenSkin":"skins.core.PhotoFullScreenSkin","mobile.core.skins.PhotoGalleryFullScreenDefaultSkin":"skins.core.PhotoGalleryFullScreenDefaultSkin","mobile.core.skins.PhotoGalleryGridDefaultSkin":"skins.core.PhotoGalleryGridDefaultSkin","mobile.core.skins.PhotoSkin":"skins.core.PhotoSkin","mobile.core.skins.RichTextImageSkin":"skins.core.RichTextImageSkin","mobile.core.skins.RichTextSkin":"skins.core.RichTextSkin","mobile.core.skins.ServiceItemSkin":"skins.core.ServiceItemSkin","mobile.core.skins.ServiceListSkin":"skins.core.ServiceListSkin","mobile.core.skins.SimpleButtonSkin":"skins.core.SimpleButtonSkin","mobile.core.skins.SiteNavigationMenuSkin":"skins.core.SiteNavigationMenuSkin","mobile.core.skins.TwitterFollowSkin":"skins.core.TwitterFollowSkin","mobile.core.skins.FacebookLikeSkin":"skins.core.FacebookLikeSkin"}),define.resource("experimentsOrder",[{id:"AppsOpenAppMarket",group:"New",owner:"Mayah",description:"Apps to open app market",dependencies:[],conflicts:["AddPageInAddDialog"]},{id:"Staff",group:"Wix",owner:"xxxx",description:"For Studio use only",dependencies:[],conflicts:[]},{id:"Dev",group:"New",owner:"Gil",description:"You are looking at it now!",dependencies:[],conflicts:[]},{id:"TPANewSettings",group:"New",owner:"Mayah",description:"New setting panel layout",dependencies:[],conflicts:[]},{id:"TPAPremium",group:"Picker",owner:"Mayah",description:"package picker for apps",dependencies:[],conflicts:[]},{id:"RenamePages",group:"New",owner:"Mayah",description:'Add "Rename Pages" action to the menu component FPP',dependencies:[],conflicts:["PartialComponentPreview"]},{id:"PartialComponentPreview",group:"New",owner:"Lichtash",description:"Partially previews a component in Editing Mode (for clickthrough)",dependencies:[],conflicts:[]},{id:"UpgradeForUpgradeButton",group:"New",owner:"Lichtash",description:"Unified behaviour of the upgrade button from SiteNamePanel",dependencies:[],conflicts:[]},{id:"FixMoreButton",group:"New",owner:"Lichtash",description:"Fix for More button dropdown in DropDownMenu",dependencies:[],conflicts:[]},{id:"MediaGalleryFrame",group:"New",owner:"Lichtash",description:"IFrame API for external Media Gallery in the editor",dependencies:[],conflicts:[]},{id:"URM4",group:"New",owner:"Shahar",description:"undo for theme data (fonts, colors and backgrounds)",dependencies:[],conflicts:[]},{id:"URM4DiscardChanges",group:"New",owner:"Shahar",description:'returns the "Discard Changes" buttons to the Theme data panels',dependencies:["URM4"],conflicts:[]},{id:"MCM",group:"New",owner:"Roni",description:"refactor - moving the component modification logic from ComponentEditBox to MouseComponentModifier ",dependencies:[],conflicts:[]},{id:"GridLines",group:"New",owner:"Roni",description:"grid lines which control the height and y of site segments",dependencies:[],conflicts:[]},{id:"GridLines2",group:"New",owner:"Roni",description:"grid lines - Nadavs version",dependencies:[],conflicts:[]},{id:"CallOnNextRender",group:"New",owner:"Roni",description:"use CallOnNextRender function to sync rendering with browser natural rendering",dependencies:[],conflicts:[]},{id:"LazyShare",group:"New",owner:"Lichtash",description:"",dependencies:[],conflicts:[]},{id:"JITPageLoader",group:"New",owner:"Dromi",description:"enable loading pages structure and data only when they are needed",dependencies:[],conflicts:[]},{id:"NewFetchPolicy",group:"New",owner:"Dromi&Barak",description:"using the new fetch policy in the scriptLoader",dependencies:["JITPageLoader"],conflicts:[]},{id:"WixAppsPage",group:"New",owner:"Mimran",description:"Wix Apps (AKA Lists) Application Page",dependencies:[],conflicts:[]},{id:"AppBuilder",group:"New",owner:"Mimran",description:"Wix Apps - App Builder",dependencies:["URM4"],conflicts:[]},{id:"AppBuilderLinks",group:"New",owner:"kfirg",description:"Wix Apps - App Builder Links",dependencies:["AppBuilder"],conflicts:[]},{id:"AppBuilderCopyPaste",group:"New",owner:"mimran",description:"Wix Apps - App Builder Copy paste",dependencies:["AppBuilder"],conflicts:[]},{id:"URM5",group:"New",owner:"Shahar",description:"undo for wixapps (including ecommerce)",dependencies:["AppBuilder"],conflicts:[]},{id:"WixAppsDirection",group:"New",owner:"Amit K",description:"Supporting direction (RTL) for App Parts",dependencies:[],conflicts:[]},{id:"RichTextViewer",group:"New",owner:"Alissa",description:"refactor the viewer component to work with new skin and place the right title in the link",dependencies:[],conflicts:[]},{id:"RichText",group:"New",owner:"Alissa",description:"new rich text editor",dependencies:["RichTextViewer"],conflicts:[]},{id:"RichTextPresets",group:"New",owner:"Alissa",description:"add line height presets",dependencies:["RichText"],conflicts:[]},{id:"RichText2",group:"New",owner:"Alissa",description:"new rich text editor phase 2",dependencies:["RichTextViewer","RichText"],conflicts:[]},{id:"AppsDispose",group:"New",owner:"Kfir",description:"call dispose on editor proxies",dependencies:[],conflicts:[]},{id:"RichTextMigrationQA",group:"New",owner:"Shahar",description:"text component migration for QA use",dependencies:["RichTextViewer"],conflicts:[]},{id:"AddPageInAddDialog",group:"New",owner:"Roni",description:"ability to add a page from the add menu",dependencies:[],conflicts:[]},{id:"WalkMe",group:"New",owner:"Sivan",description:"WalkMe Button in the top bar",dependencies:[],conflicts:[]},{id:"SliderAutoPlay",group:"New",owner:"xxxx",description:"",dependencies:[],conflicts:[]},{id:"FirstSave",group:"New",owner:"Tom",description:"Wait 20 minutes before popping the Save Dialog ",dependencies:[],conflicts:[]},{id:"PremiumWixAds",owner:"Tom",group:"New",description:"Monetize WixAds in Preview Mode, ASK OMER!!! ",dependencies:[],conflicts:[]},{id:"SyncWixify",group:"New",owner:"Sivan & Ido",description:"Make wixify work sync - part of the base component refactor",dependencies:["NBC_WCD"],conflicts:[]},{id:"EscapeData",group:"New",owner:"Ido",description:"escape/html-encode characters from inputs to prevent data corruption",dependencies:[],conflicts:[]},{id:"NativeUploadButton",group:"New",owner:"Barak",description:"html5 native uploader in the media dialog",dependencies:[],conflicts:[]},{id:"PublishMarketingBanner",group:"Sale",owner:"xxxx",description:"in publish dialog show the sale marketing banner",dependencies:[],conflicts:[]},{id:"ShowOneMnMessage",group:"New",owner:"xxxx",description:"in publish dialog show one mn message in case the site revision has not been updated on all servers",dependencies:[],conflicts:[]},{id:"FooterHeaderTracking",group:"New",owner:"Denis",description:"Check Serialized data and report if there is no Header of Footer",dependencies:[],conflicts:[]},{id:"MemberLoginAndProtectPageUpgradeButton",group:"New",owner:"Leonid",description:"Adding upgrade button to site members panel - login button and protect page panel",dependencies:[],conflicts:[]},{id:"HtmlParastorage",group:"New",owner:"Ido",description:"string replace static.wix.com to static.parastorage.com in html component",dependencies:[],conflicts:[]},{id:"NewBaseCompFiveGridLine",group:"New",owner:"Sivan",description:"convert horizontal line to new base component",dependencies:["SyncWixify"],conflicts:[]},{id:"NBC_WCD",group:"New",owner:"Dromy",description:"New version of WComponentDeserializer",dependencies:[],conflicts:[]},{id:"NBC_WCD_GridLines",group:"New",owner:"Dromy",description:"replace the change of the GridLines experiment on the WComponentDeserializer with changes that relevant to the new WCD",dependencies:["SyncWixify","GridLines","NBC_WCD"],conflicts:[]},{id:"StylePerComponent",group:"New",owner:"Tom B. and Uri T.",description:"Style per Component step 1: Refactor style selection button",dependencies:[],conflicts:[]},{id:"AdvancedStylingCancel",group:"New",owner:"Tom B, Dany S",description:"Added a cancel action to Advanced Styling Dialog",dependencies:["StylePerComponent"],conflicts:[]},{id:"AdvancedStylingUndo",group:"New",owner:"Tom B, Dany S",description:"Added an undo action to Advanced Styling Dialog",dependencies:["StylePerComponent","AdvancedStylingCancel"],conflicts:[]},{id:"MobileRecognition",group:"New",owner:"Sivan",description:"Mobile device recognition code",dependencies:[],conflicts:[]},{id:"MobileFixes",group:"New",owner:"Sivan & Roni",description:"Mobile Bug Fixes",dependencies:["MobileRecognition"],conflicts:[]},{id:"MobileZoom",group:"New",owner:"Roni",description:"Zoom mode for mobile devices",dependencies:["MobileRecognition"],conflicts:[]},{id:"MobilePaginatedGrid",group:"New",owner:"sivan",description:"support mobile gestures in the animated grid",dependencies:["MobileRecognition"],conflicts:[]},{id:"MobileSlideShow",group:"New",owner:"sivan",description:"support mobile gestures in the slide show gallery",dependencies:["MobileRecognition"],conflicts:[]},{id:"MobileSliderGallery",group:"New",owner:"sivan",description:"support mobile gestures in the slider gallery",dependencies:["MobileRecognition"],conflicts:[]},{id:"MobileSiteWidth",group:"New",owner:"sivan",description:"support mobile site width adjustments",dependencies:["MobileRecognition"],conflicts:[]},{id:"LayoutFixes",group:"New",owner:"Roni",description:"Layout Bug Fixes: #WOH-631, #WOH-311, #WOH-690, pageAutoShrink removal",dependencies:[],conflicts:[]},{id:"FacebookCommentFix",group:"New",owner:"Roni",description:"#WOH-1278 - fb warning appears when the y of fbComment is bigger than 10000",dependencies:[],conflicts:[]},{id:"ErrorLogOnFooterFucks",group:"New",owner:"Roni",description:"throws an error log when the footer is deleted",dependencies:[],conflicts:[]},{id:"NewBaseCompFiveGridLine",group:"New",owner:"Sivan",description:"convert horizontal line to new base component",dependencies:["SyncWixify"],conflicts:[]},{id:"DummyExp1",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp2",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp3",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp4",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp5",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp6",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp7",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp8",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp9",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp10",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"NotificationDialog",group:"New",owner:"Leonid",description:"added new dialog type, that could contain icon, show again checkbox and link to help wizard",dependencies:[],conflicts:[]},{id:"SaveSuccessDialogHide2",group:"New",owner:"Leonid",description:"added dont show again checkbox using new notification dialog",dependencies:["NotificationDialog"],conflicts:[]},{id:"WarningOutOfGrid",group:"New",owner:"Leonid",description:"Add popup message about placing elements outside the Grid",dependencies:["NotificationDialog"],conflicts:[]},{id:"RightClick",group:"New",owner:"Tom B, Guy R",description:"disable context menu on right click and show FPP",dependencies:[],conflicts:[]},{id:"noPaddingBox",group:"New",owner:"Tom B",description:"Remove padding around ComponentEditBox",dependencies:[],conflicts:["GridLines"]},{id:"NBC_SiteButton",group:"New",owner:"Roy",description:"a SiteButton that uses new base component",dependencies:["SyncWixify"],conflicts:[]},{id:"NBC_WPhoto",group:"New",owner:"Ido",description:"changes the WPhoto component to use the new base component",dependencies:["SyncWixify"],conflicts:[]},{id:"NBC_VerticalLine",group:"New",owner:"Nir M",description:"New BaseComponent Vertical Line!",dependencies:["SyncWixify"],conflicts:[]},{id:"NBC_HorizontalLine",group:"New",owner:"Nir M",description:"New BaseComponent Horizontal(FiveGridLine) Line!",dependencies:["SyncWixify"],conflicts:[]},{id:"NBC_WRichText",group:"New",owner:"Erez",description:"convert richtext to new base component",dependencies:["SyncWixify","RichTextViewer"],conflicts:[]},{id:"TwitterAPIpatch",group:"New",owner:"Leonid",description:"override twitterFeed with new twitter API",dependencies:[],conflicts:[]},{id:"NBC_SlideShowGallery",group:"New",owner:"Erez",description:"convert SlideShowGallery to new base component",dependencies:["SyncWixify"],conflicts:[]},{id:"LimitRecursiveDDM",group:"New",owner:"Roy",description:"Fix WOH-1330: Too many blocking recursive calls in DropDownMenu and HorizontalMenu cause slow loading of some sites",dependencies:[],conflicts:[]},{id:"FixTouchSupportBug",group:"New",owner:"Sivan",description:"fix the mobile recognition in the slider gallery to use modernizer",dependencies:[],conflicts:[]},{id:"EcomSocial",group:"New",owner:"Tanya",description:"adds social buttons to product page",dependencies:[],conflicts:[]},{id:"MobileQuickActions",group:"New",owner:"Denis Wolf",description:"editor panels for mobile quick actions data",dependencies:[],conflicts:[]},{id:"GuidId",group:"New",owner:"Noam",description:"Change getUniqueId in Helper.js to use GUID ids",dependencies:[],conflicts:[]},{id:"ImagesFromTopology",group:"New",owner:"Ido, Denis",description:"Fixes flow for TopologyUrl appliance to get images from custom url",dependencies:["MobileRecognition"],conflicts:[]},{id:"FixMissingSkins",group:"New",owner:"Tom B, Uri T",description:"Fixes missing skins in site structure by filling in with a default skin from the SKINS data item.",dependencies:[],conflicts:[]},{id:"EditorRulers",group:"New",owner:"Uri T",description:"Add Rulers.",dependencies:[],conflicts:["GridLines"]},{id:"EditorRulersDefaultOn",group:"New",owner:"Uri T",description:"Rulers are turned on by default.",dependencies:["EditorRulers"],conflicts:["GridLines"]},{id:"LazyMasterPage",group:"New",owner:"Noam",description:"Load lazy the Footer and Header without blocking the pages load",dependencies:[],conflicts:[]},{id:"EcomPicsOnlyGallery",group:"New",owner:"Tanya",description:"adds new gallery view",dependencies:[],conflicts:[]},{id:"TPAGlued",group:"New",owner:"Gil O.",description:"Glued widgets for TPA",dependencies:[],conflicts:[]},{id:"NoAnchorsFromServer",group:"New",owner:"Roy",description:"Remove anchors from server",dependencies:[],conflicts:[]},{id:"AppMarket",group:"NewDesign",owner:"Gil O.",description:"App Market new design",dependencies:[],conflicts:["GridLines","GridLines2"]},{id:"MobileFixes2",group:"New",owner:"Sivan & Roni",description:"More Mobile Bug Fixes",dependencies:["MobileRecognition","MobileFixes"],conflicts:[]},{id:"MobileBackground",group:"New",owner:"Sivan",description:"Mobile Background manipulations",dependencies:["MobileRecognition","MobileFixes","MobileFixes2"],conflicts:[]},{id:"MobileFontsPOC",group:"New",owner:"Sivan",description:"Mobile Background manipulations",dependencies:["MobileRecognition","MobileFixes","MobileFixes2"],conflicts:[]},{id:"SiteVersion",group:"New",owner:"Leeron",description:"Use site version when loading, saving, publishing, restoring local changes, etc.",dependencies:[],conflicts:[]},{id:"PinterestPinComponent",group:"New",owner:"Erez & Eitan",description:"New Pinterest pin button component",dependencies:[],conflicts:[]},{id:"EcomRepo",group:"New",owner:"Tanya",description:"Separate ecommerce repository from WixApps",dependencies:[],conflicts:[]},{id:"DraggableAreaChanges",group:"New",owner:"Leonid",description:"Pages panel - Change draggable area icon on mouse hover",dependencies:[],conflicts:[]},{id:"RemovePromotionToCreateFacebookPage",group:"New",owner:"Leonid (LeoniJJ for you)",description:"Remove the promotion to create a facebook page in the post-publish panel, for premium users",dependencies:[],conflicts:[]},{id:"EcomTax",group:"New",owner:"Tanya",description:"Tax support in shopping cart",dependencies:[],conflicts:[]},{id:"VKShare",group:"New",owner:"Roman, Guy",description:"New component for VK Share button",dependencies:[],conflicts:[]},{id:"TPAScript",group:"New",owner:"Roman",description:"Add Scripting for tpa",dependencies:[],conflicts:[]},{id:"FirstSaveServerApi",group:"New",owner:"Leeron",description:"Use new server api for first (full) save.",dependencies:[],conflicts:[]},{id:"SMForgot_Password",group:"New",owner:"Nir",description:"Forgotten password reset on Site Members login.",dependencies:[],conflicts:[]},{id:"EcomPremium",group:"New",owner:"Tanya",description:"Tell users that eCom is a premium feature",dependencies:[],conflicts:[]},{id:"Blog",group:"New",owner:"Nadav A, Tomer G",description:"Blog functionality added to editor",dependencies:["WixAppsPage"],conflicts:[]},{id:"NewMobileOrientation",group:"New",owner:"D.Wolf",description:"better stronger async device orientation detection",dependencies:["MobileRecognition, MobileZoom"],conflicts:[]},{id:"FacebookShare",group:"New",owner:"Eitan & Galia",description:"FacebookShare component - share a wix website to facebook",dependencies:[],conflicts:[]},{id:"GetLikeUrl",group:"New",owner:"Leonid",description:"Preview site from dashboard was not worked when site had contain facebook-like component.",dependencies:[],conflicts:[]},{id:"AutoResizeEvent",group:"New",owner:"Jiri",description:"Fixes component resize event int wixapps/ResizableProxy",dependencies:[],conflicts:[]},{id:"MobileEcomViews",group:"New",owner:"Tanya",description:"New mobile views for product page and shopping cart",dependencies:["MobileRecognition","MobileZoom"],conflicts:[]},{id:"LongerTooltipTimer",group:"New",owner:"Tom B",description:"Changes tooltip hover timer to 500ms",dependencies:[],conflicts:[]},{id:"PageEmptyPass_Fix",group:"New",owner:"Nir",description:"Fix for defect WOH-138, protection shouldn't be checked if password is empty.",dependencies:[],conflicts:[]},{id:"NoRedirectOnFirstSave",group:"New",owner:"Dany",description:"Avoid page redirect on first site save.",dependencies:["AppBuilder"],conflicts:[]},{id:"SMMemberAccessLimit",group:"New",owner:"Nir Moav",description:"Limits the access to members that logged-in in the past, and access rights have changed in the meantime.",dependencies:[],conflicts:[]},{id:"MobileWixAds",group:"New",owner:"DenisW and TomB",description:"do not display bottom ad on smartphones",dependencies:["MobileRecognition"],conflicts:[]},{id:"AdditionalInfo",group:"New",owner:"Leonid",description:"Pages Panel - sub pages indication",dependencies:[],conflicts:[]},{id:"MobileViewerQuickActions",group:"New",owner:"Sivan & Noam",description:"handle mobile quick actions after editor loading - requires server featrue toggle isMobileViewport:true",dependencies:["MobileRecognition"],conflicts:[]},{id:"RefreshFrameOnTransition",group:"New",owner:"Lichtash",description:"Refresh HTMLComponent Iframe on page transition",dependencies:["MobileRecognition"],conflicts:[]},{id:"RenderPerf",group:"New",owner:"Jiri",description:"Improves performance of wixapps content rendering",dependencies:[],conflicts:[]},{id:"PageLoadReport",group:"New",owner:"Ido&Nadav&Alissa&Laufer",description:"add a very ugly page loading info report and send to BI",dependencies:[],conflicts:[]},{id:"StoreManagerPopupWidth",group:"New",owner:"Tanya",description:"changes the store manager window width",dependencies:[],conflicts:[]},{id:"BetterPrefetch",group:"New",owner:"Dromy",description:"start prefetching 12s after site is loaded, only prefetch first 5 pages, and time between page prefetch is now 10s",dependencies:["JITPageLoader"],conflicts:[]},{id:"SettingsMenuSelectionFix",group:"New",owner:"Nir Moav",description:"A fix for WOH-2424, fixing the selection of items in menus.",dependencies:[],conflicts:[]}]),define.component("wysiwyg.common.components.InfoTip",function(e){var t=e;t.inherits("mobile.core.components.base.BaseComponent"),t.skinParts({content:{type:"htmlElement"}}),t.resources(["W.Utils"]),t.states({hidden:["hidden","visible"]}),t.binds(["initialize","_callTip","_showTip","_mouseOut","_mouseIn","_timerToClose","_closeToolTipCmd","_showToolTipCmd","_stayInWindowBounds"]),t.fields({_mouseInside:!1,_onCallerMouseMoveWasCalled:!1,_shouldShowTooltipAfterTimout:!1,_tipToShow:"",_showTimer:100}),t.methods({initialize:function(e,t,i){this.parent(e,t,i),this.tipNode=this.getViewNode(),this.tipNode.addEvent("click",this._handleEvent),this.tipNode.addEvent("mouseleave",this._mouseOut),this.tipNode.addEvent("mouseenter",this._mouseIn),this.tipNode.addEvent("mousedown",this._mouseDown),document.addEvent("keyup",this._mouseOut),this.setState("hidden")},_closeToolTipCmd:function(){this._tipToShow="",this._hideToolTipTimeOut=setTimeout(function(){this._mouseInside||this._closeTip()}.bind(this),150)},_showToolTipCmd:function(e,t){this._shouldShowTooltipAfterTimout=!0,this._tipToShow=e.id,clearTimeout(this._hideToolTipTimeOut),window.setTimeout(function(){this._shouldShowTooltipAfterTimout&&this._tipToShow===e.id&&this._callTip(e,t)}.bind(this),this._showTimer)},_handleEvent:function(e){var t=e.target;t.get("href")&&e.preventDefault();var i=this.getLogic(),n=t.get("action");n&&i[n].bind([i,t])()},_setToolTipValues:function(e){this._skinParts.content.set("html",e)},_getToolTipCallerNode:function(e){return"element"==typeOf(e.source)?e.source:e.source.getViewNode()},_callTip:function(e,t){this._resetToolTip(),this._setToolTipValues(e.content),this._showTip(this._getToolTipCallerNode(t))},_resetToolTip:function(){this._skinParts.content.empty()},_showTip:function(e){var t=this.getViewNode(),i=this._getPosition(e,t);t.setStyles({top:i.y,left:i.x[0],right:i.x[1]}),this.removeState("hidden","hidden"),this._activateTimerToClose(t,e)},_activateTimerToClose:function(){this._numOfTimerCalls++,this.resources.W.Utils.callLater(this._closeTipByTimeout,null,this,3e3)},_closeTipByTimeout:function(){this._numOfTimerCalls--,0===this._numOfTimerCalls&&this._closeTip()},_timerToClose:function(){var e;this.onCallerMove=function(){this._onCallerMouseMoveWasCalled=!0,$(document.body).removeEvent("mousemove",this.onCallerMove)}.bind(this),$(document.body).addEvent("mousemove",this.onCallerMove),this.checkIfOut=function(){(this._mouseInside||!this._onCallerMouseMoveWasCalled)&&this.createTimer()}.bind(this),this.createTimer=function(){e=setTimeout(this.checkIfOut,3e3)},this.createTimer()},_getPosition:function(e,t){var i=e.getPosition(),n=e.getHeight(),o=e.getWidth(),r=i.y,s=i.x,a=t.getHeight(),d=t.getWidth(),c=s-d/2;this._top=r-a,this._left=c,this._right="auto",this._stayInWindowBounds(n,o,r,s,a);var l=0,p=0;if(t.offsetParent){var h=t.offsetParent.getPosition();l=h.y,p=h.x}return this._top=this._top-l,this._left=this._left-p,this._right=this._right+p,{x:[this._left,this._right],y:this._top}},_stayInWindowBounds:function(e,t,i,n,o){var r=window.innerWidth,s=window.innerHeight;if(0>this._top-document.body.getScroll().y){var a=i+o;a>s+document.body.getScroll().y+o&&(a=0>i?i:document.body.getScroll().y),this._top=a>0?a:0}0>this._left?this._left=n:this._left>r&&(this._left="auto",this._right=n+t)},_setState:function(e,t){e?this.setState(t):this.removeState(t)},_closeTip:function(){this._shouldShowTooltipAfterTimout=!1,this._onCallerMouseMoveWasCalled=!1,this.setState("hidden"),this.getViewNode().setStyles({top:0,left:0})},_mouseOut:function(){this._mouseInside=!1,this._closeTip()},_mouseIn:function(){this._mouseInside=!0},_mouseDown:function(e){e.stopPropagation()}})}),define.component("wysiwyg.common.components.inputs.OptionsListInput",function(e){var t=e;t.inherits("mobile.core.components.base.BaseComponent"),t.traits(["wysiwyg.viewer.components.traits.ValidationSettings"]),t.utilize(["wysiwyg.viewer.utils.ComponentSequencer"]),t.binds(["_onItemSelected"]),t.states({validity:["valid","invalid"]}),t.fields({_selectedItem:null}),t.dataTypes(["SelectableList"]),t.methods({initialize:function(e,t,i){this.parent(e,t,i),this._sequencer=new this.imports.ComponentSequencer,i&&(this._sequencer.resolveItem=function(){return{comp:i.compType,skin:i.compSkin}})},_onAllSkinPartsReady:function(){},_preventRenderOnDataChange:function(e,t){return"selected"==t},_prepareForRender:function(){return this._sequencer.addEvent("productionFinished",function(e){this._onSequencerFinished(e)}.bind(this)),this._sequencer.createComponents(this.getViewNode(),this.getDataItem().get("items")),!0},_onSequencerFinished:function(e){var t=e.elements;t.forEach(function(e){var t=e.getLogic();t.addEvent("itemSelected",this._onItemSelected),t.getDataItem()===this.getDataItem().get("selected")&&(this._selectedItem=t,this._selectedItem.setSelected(!0))}.bind(this))},_onItemSelected:function(e){if(this._selectedItem){if(this._selectedItem===e)return;this._selectedItem.setSelected(!1)}this._selectedItem=e,this._selectedItem.setSelected(!0);var t=this._selectedItem.getDataItem();this.setValidationState(!0),this.getDataItem().set("selected",t),this.fireEvent("selectionChanged",t)},setValidationState:function(e){this.setState(e?"valid":"invalid","validity"),this.parent(e)}})}),define.Class("wysiwyg.common.components.traits.LinkableComponent",function(e){var t=e;t.resources(["W.Utils","W.Viewer"]),t.binds(["_linkableComponentRender","_linkify","renderLinks","_showNavigationDisabledTooltip","_linkableComponentEditModeChanged"]),t.statics({linkType:{SMS:"SMS",CALL:"CALL",SKYPE:"SKYPE",MAP:"MAP",EMAIL:"EMAIL",FACEBOOK:"FACEBOOK",FLICKR:"FLICKR",BLOGGER:"BLOGGER",MYSPACE:"MYSPACE",LINKEDIN:"LINKEDIN",TWITTER:"TWITTER",TUMBLR:"TUMBLR",YOUTUBE:"YOUTUBE",VIMEO:"VIMEO",PAGE:"PAGE",FREE_LINK:"FREE_LINK",TEXT:"TEXT",DELICIOUS:"DELICIOUS",WEBSITE:"WEBSITE",DOCUMENT:"DOCUMENT",LOGIN:"LOGIN",ADMIN_LOGIN:"ADMIN_LOGIN"},linkTarget:{SAME_WINDOW:"_self",NEW_WINDOW:"_blank"}}),t.methods({initialize:function(){var e=this.resources.W.Utils.linkUtils;this.render?(this._componentOriginalRender=this.render.bind(this),this.render=this._linkableComponentRender):this.NEW_BASE_COMP===!0&&(this.on(Constants.LifecycleSteps.RENDER,this,this._linkableComponentRender),this.on(Constants.EventDispatcher.Events.EXTERMINATING,this,this._exterminateLinkableComponent)),this._linkableComponentOnEditModeChanged=e.linkableComponentEditModeChanged.bind(this),this.injects().Commands.registerCommandListenerByName("WPreviewCommands.WEditModeChanged",this,this._linkableComponentOnEditModeChanged)},_exterminateLinkableComponent:function(){this.injects().Commands.unregisterListener(this)},_linkableComponentRender:function(){this._componentOriginalRender&&this._componentOriginalRender();var e=this.resources.W.Utils.linkUtils,t=this.getDataItem();e.renderLinks.call(this,t,this._skinParts.link),"PREVIEW"==this.resources.W.Viewer.getEditorMode()&&e.linkableComponentEditModeChanged.call(this,"PREVIEW",t,this._skinParts.link)},renderLinks:function(){var e=this.getDataItem(),t=e.get("href"),i=e.get("target");("same"==i||"self"==i)&&(i="_self",e.set("target","_self"));var n=e.get("linkType"),o=this._skinParts.link;this._linkify(n,o,t,i),this._NO_LINK_PROPAGATION&&this._disableLinkClickPropagation(o)},_disableLinkClickPropagation:function(e){e.addEvent("click",function(e){e.stopPropagation()})},_linkify:function(e,t,i,n){t&&(i&&""!==i?(t.set("href",i),t.setStyle("cursor","pointer"),this._setTarget(t,n),this.hasState("noLink","linkableComponent")&&this.removeState("noLink","linkableComponent")):(t.setStyle("cursor","default"),t.erase("href"),t.erase("target"),this.hasState("noLink","linkableComponent")&&this.setState("noLink","linkableComponent")),this._handleSpecialCases(e,t))},_handleSpecialCases:function(e,t){switch(t.removeEvents("click"),e){case this.linkType.LOGIN:t.addEvent("click",function(){if(window.animateForm){var e=this.getDataItem(),t=e.get("text");if(t){t=JSON.parse(t);var i=t.postLoginUrl,n=t.postSignupUrl,o=t.type,r="HTML",s=window.userApi?window.userApi.isSessionValid():!1;s?i&&(window.location.href=i):window.animateForm.callForm([n,i,o,r])}}}.bind(this));break;case this.linkType.ADMIN_LOGIN:t.setStyle("cursor","pointer"),t.addEvent("click",function(){this.injects().Commands.executeCommand("WViewerCommands.AdminLogin.Open")}.bind(this))}},_setTarget:function(e,t){e.set("target",t)},_linkableComponentEditModeChanged:function(e){if(this.getIsDisposed()!==!0){var t,i=!1,n=!1,o=this.getDataItem(),r=o.get("linkType"),s=o.get("target");s==this.linkTarget.SAME_WINDOW&&r==this.linkType.WEBSITE&&(i=!0),r==this.linkType.EMAIL&&(n=!0),t=this._skinParts.link,"PREVIEW"==e?i?this._bindPageLeaveWarningToLink(t):n&&(this._bindMailtoLinks(),this.renderLinks()):(t.removeEvents("click"),this.renderLinks())}},_bindMailtoLinks:function(){var e=this._skinParts.link;e.addEvent("click",this._temporaryDisableNavigationWarning)},_temporaryDisableNavigationWarning:function(){window.enableNavigationConfirmation=!1,setTimeout(function(){window.enableNavigationConfirmation=!0},50)},_bindPageLeaveWarningToLink:function(e){e.erase("href"),e.erase("target"),e.addEvent("click",function(e){e.preventDefault(),this._showNavigationDisabledTooltip()}.bind(this))},_showNavigationDisabledTooltip:function(){var e={component:this};this.injects().Commands.executeCommand("linkableComponent.navigateSameWindow",e,this)}})}),define.Class("wysiwyg.common.components.traits.SelectableOption",function(e){var t=e;t.statics({ITEM_SELECTED_EVENT:"itemSelected"}),t.fields({_isSelected:!1}),t.methods({initialize:function(e,t,i){this.parent(e,t,i),this.getViewNode().addEvent("click",function(){this.fireEvent(this.ITEM_SELECTED_EVENT,this)}.bind(this))},setSelected:function(e){this._isSelected=e}})}),define.Class("wysiwyg.common.managers.LayoutManager",function(e){var t=e;t.utilize(["wysiwyg.common.managers.classdata.Anchor"]),t.inherits("bootstrap.managers.BaseManager"),t.fields({LOCK_THRESHOLD:70,DEFAULT_MARGIN:10,SUGGEST_ANCHOR_MARGIN:20,FLAG_DIRTY_TOP:1,FLAG_DIRTY_BOTTOM:2}),t.binds(["_getAnchoredY","_getAnchoredH"]),t.resources(["W.Utils","W.Viewer"]),t.methods({initialize:function(){this._AnchorClass=this.imports.Anchor,this._isReady=!0,this._changedByHGroup=[],this._emptyArr=[]
},setSavedAnchor:function(e){this._savedAnchors=e},attachSavedAnchors:function(e){this.addMissingAnchors();for(var t in this._savedAnchors)if(this._savedAnchors[t]){var i=$(t);if(e&&!e.contains(i))continue;i&&i.getLogic&&0===i.getLogic().getAnchors().length&&this.attachSavedAnchorsToComponent(i.getLogic(),this._savedAnchors[t])&&delete this._savedAnchors[t]}},addMissingAnchors:function(){this._savedAnchors||(this._savedAnchors={}),this._savedAnchors.SITE_PAGES&&0!=this._savedAnchors.SITE_PAGES.length||(this._savedAnchors.SITE_PAGES=[{distance:0,locked:!0,originalValue:0,targetComponent:"PAGES_CONTAINER",type:"BOTTOM_PARENT"}]),this._savedAnchors.PAGES_CONTAINER&&0!=this._savedAnchors.PAGES_CONTAINER.length||(this._savedAnchors.PAGES_CONTAINER=[{distance:10,locked:!0,originalValue:0,targetComponent:"SITE_FOOTER",type:"BOTTOM_TOP"}])},attachSavedAnchorsToComponent:function(e,t){for(var i,n=[],o=[],r=0;t.length>r;r++)i=this.deserializeAnchor(t[r],e),i.type==i.ANCHOR_LOCK_BOTTOM?o.push(i):n.push(i);if(this._setComponentAnchors(e,n),o.length>0){var s=new this._AnchorClass;for(s.distance=0,s.originalValue=0,s.topToTop=0,s.type=s.ANCHOR_LOCK_BOTTOM,s.fromComp=e,s.toComp=e,o.unshift(s),r=0;o.length>r;r++)o[r].toComp.setHorizontalGroup(o)}},_setComponentAnchors:function(e,t){var i=e.getAnchors();e.setAnchors(t),this._notifyComponentAnchorsChanged(e,t,i)},_notifyComponentAnchorsChanged:function(e,t,i){var n=this.serializeAnchors(i),o=this.serializeAnchors(t);this.resources.W.Utils.areObjectsEqual(n,o)||this.fireEvent("updateAnchors",{data:{changedComponentIds:[e.getComponentId()],oldAnchors:n,newAnchors:o,sender:"layoutmanager"}})},serializeAnchors:function(e){var t=[],i=this;return e.each(function(e){t.push(i.serializeAnchor(e))}),t},serializeAnchor:function(e){var t={};return t.type=e.type,t.targetComponent=e.toComp.getComponentId(),t.locked=e.locked,t.distance=e.distance,t.topToTop=e.topToTop,t.originalValue=e.originalValue,t},deserializeAnchors:function(e,t){var i=[],n=this;return e.each(function(e){i.push(n.deserializeAnchor(e,t))}),i},deserializeAnchor:function(e,t){var i=new this._AnchorClass;return i.distance=e.distance||0,i.topToTop=e.topToTop||0,i.originalValue=e.originalValue||0,i.type=e.type,i.toComp=$(e.targetComponent).getLogic(),i.fromComp=t,i.locked=e.locked||!1,i},reportResize:function(e){var t;if(!e||0===e.length)throw Error("Invalid changed elements");for(this._updateAnchors(e[0],e,!1),t=0;e.length>t;t++)this._updateChildAnchors(e[t]);var i=this._getAndClearChangedByHGroup();for(t=0;i.length>t;t++)this._updateChildAnchors(i[t]),this._updateAnchors(i[0],[i[0]],!1);var n={type:"componentResize",data:{changedElements:e}};this._reportElementsSize(n.data.changedElements),this.fireEvent(n.type,n)},_reportElementsSize:function(e){for(var t=0;e.length>t;t++)this.notifyPositionChanged(e[t],"updateSize")},reportMove:function(e){if(!e||0===e.length)throw Error("Invalid changed elements");for(var t=0;e.length>t;t++)this.notifyPositionChanged(e[t],"updatePosition");this._updateAnchors(e[0],e,!1);var i=this._getAndClearChangedByHGroup();for(t=0;i.length>t;t++)this._updateAnchors(i[0],[i[0]],!1);var n={type:"componentMove",data:{changedElements:e}};this.fireEvent(n.type,n)},notifyPositionChanged:function(e,t){var i=e.getLastCoordinates(),n=e.getCurrentCoordinates(),o=e.getLastDimensions(),r=e.getCurrentDimensions(),s=[e.getComponentId()],a=s.map(function(e){return this.resources.W.Utils.getComponentLogicFromDom(e)}.bind(this)),d=this._getSiblingsYSortedArray(a[0]),c=d.map(function(e){return e.getComponentId()}.bind(this)),l={data:{changedComponentIds:s,ySortedElementIds:c,oldCoordinates:i,newCoordinates:n,oldDimensions:o,newDimensions:r}};this.resources.W.Utils.areObjectsEqual(n,i)&&this.resources.W.Utils.areObjectsEqual(r,o)||this.fireEvent(t,l)},reportReparent:function(e,t,i,n){if(!e||0===e.length)throw Error("Invalid changed elements");this._updateChildAnchors(t),this._updateAnchors(e[0],e,!1);var o=e[0].getParentComponent(),r=o.getChildComponents().map(function(e){return e.getLogic()}),s=e.map(function(e){return e.getComponentId()}),a=n?"showOnAllPagesChange":"scopeChangeWithinPage",d={type:"reparentComponent",data:{subType:a,changedComponentIds:s,oldState:{parentId:t._compId,children:i},newState:{parentId:o._compId,children:r}}};this.fireEvent(d.type,d),this.fireEvent("resetHistoryStack")},reportAddComponent:function(e){this._updateAnchors(e[0],e,!1);var t={type:"onAddComponent",data:e};this.fireEvent(t.type,t),this.fireEvent("resetHistoryStack")},reportDeleteComponent:function(e){this._updateChildAnchors(e),this.fireEvent("resetHistoryStack")},reportResizeStart:function(e){this._getAndClearChangedByHGroup();var t={type:"componentResizeStart",data:e};this.fireEvent(t.type,t)},deleteSavedAnchorsById:function(e){this._savedAnchors&&this._savedAnchors[e]&&delete this._savedAnchors[e]},getOptionalBottomLocks:function(e){var t,i,n,o=[],r=[],s=e.getViewNode().getParent().getChildren("[comp]"),a=e.getHorizontalGroup();if(a){for(i=0,n=a.length;n>i;++i){var d=a[i];d.toComp!=e&&(o.push({locked:!0,target:d.toComp}),r.push(d.toComp))}t=a.slice(0)}for(i=0,n=s.length;n>i;++i){var c=s[i],l=c.getLogic&&c.getLogic();if(l&&l!=e&&-1===r.indexOf(l)&&!this._isHorizontalOverlap(e,l)&&this._isVerticalOverlap(e,l)&&l.allowHeightLock())if(t){var p=new this._AnchorClass;p.fromComp=t[0].fromComp,p.toComp=l,t.push(p),this._isValidHGroup(t)&&o.push({locked:!1,target:l}),t.pop(p)}else o.push({locked:!1,target:l})}return o},toggleHGroup:function(e,t,i){var n,o,r=e.getHorizontalGroup(),s=t.getHorizontalGroup();if(i){for(var a=0;r.length>a;a++)r[a].toComp===t&&(t.setHorizontalGroup(null),r.splice(a,1));if(1===r.length)return e.setHorizontalGroup(null),void 0;n=r}else r&&s?(r.combine(s),n=r):s?(o=new this._AnchorClass,o.type=o.ANCHOR_LOCK_BOTTOM,o.fromComp=s[0].fromComp,o.toComp=e,s.push(o),n=s):r?(o=new this._AnchorClass,o.type=o.ANCHOR_LOCK_BOTTOM,o.fromComp=r[0].fromComp,o.toComp=t,r.push(o),n=r):(n=[],o=new this._AnchorClass,o.type=o.ANCHOR_LOCK_BOTTOM,o.fromComp=e,o.toComp=e,n.push(o),o=new this._AnchorClass,o.type=o.ANCHOR_LOCK_BOTTOM,o.fromComp=e,o.toComp=t,n.push(o));this._updateHGroup(n)},_updateHGroup:function(e){for(var t=0;e.length>t;t++){var i=e[t];i.toComp.setHorizontalGroup(e),i.fromComp=e[0].fromComp,i.distance=this._getBottomDiff(i.fromComp,i.toComp),i.topToTop=i.toComp.getY()-i.fromComp.getY()}},_clearHGroup:function(e){for(var t=0;e.length>t;t++)e[t].toComp.setHorizontalGroup(null)},_isValidHGroup:function(e){var t;for(t=0;e.length>t;t++)if(e[t].toComp.getIsDisposed()||!e[t].toComp.allowHeightLock())return!1;var i=e.slice();for(i.sort(function(e,t){var i=e.toComp.getX(),n=t.toComp.getX();return i===n?0:i>n?1:-1}),t=0;i.length-1>t;t++)if(i[t].toComp.getX()+i[t].toComp.getWidth()>=i[t+1].toComp.getX())return!1;var n=e[0].toComp.getViewNode().getParent(),o=Number.MAX_VALUE,r=-Number.MAX_VALUE;for(t=0;e.length>t;t++){if(e[t].toComp.getIsDisposed())return!1;if(e[t].toComp.getViewNode().getParent()!=n)return!1;var s=e[t].toComp.getY(),a=e[t].toComp.getPhysicalHeight()+s;o=Math.min(a,o),r=Math.max(s,r)}return o>r},_getBottomDiff:function(e,t){return t.getY()+t.getPhysicalHeight()-e.getY()-e.getPhysicalHeight()},_validateCommonParent:function(e,t){if(0!==e.length){var i;i=t?t.getViewNode().getParent():e[0].getViewNode().getParent();var n=function(e){return i!==e.getViewNode().getParent()};if(e.some(n))throw Error("Invalid elements scope")}},_getSiblingsYSortedArray:function(e){var t=e.getViewNode().getParent().getChildren("[comp]");return t.some(function(e){return!e.getLogic})?[]:t.sort(function(e,t){var i=e.getLogic().getY(),n=t.getLogic().getY();return i===n?0:i>n?1:-1}).map(function(e){return e.getLogic()})},_isHorizontalOverlap:function(e,t){var i=e.getX(),n=i+e.getWidth(),o=t.getX(),r=o+t.getWidth();return!(i>r||o>n)},_isVerticalOverlap:function(e,t){var i=e.getY(),n=i+e.getPhysicalHeight(),o=t.getY(),r=o+t.getPhysicalHeight();return!(i>r||o>n)},_clearReverseAnchorsByScope:function(e,t){for(var i=e.length-1;i>-1;i--){var n=e[i];t?n.type==n.ANCHOR_BOTTOM_PARENT&&e.splice(i,1):n.type!=n.ANCHOR_BOTTOM_PARENT&&e.splice(i,1)}},_updateAnchors:function(e,t,i){this._validateCommonParent(t,e);var n,o,r,s=this._getSiblingsYSortedArray(e),a=[],d=[],c=s.length,l=null;for(r=0;s.length>r;r++)a[r]={},this._clearReverseAnchorsByScope(s[r].getReverseAnchors(),!1),s[r].getHorizontalGroup()&&(s[r].getHorizontalGroup().$hGroupDirty=!0);var p=e.getParentComponent();for(p&&this._clearReverseAnchorsByScope(p.getReverseAnchors(),!0),n=c-1;n>=0;n--){var h=s[n];this._updateOrClearHGroup(h.getHorizontalGroup()),d[n]=h.getAnchors();var u=[],m=!1;if(h.isAnchorable().from.allow){for(o=n+1;c>o;o++){var g=s[o];g.isAnchorable()&&g.isAnchorable().to.allow&&(l=null,!a[n][o]&&this._isHorizontalOverlap(h,g)&&(-1===t.indexOf(h)&&-1===t.indexOf(g)&&(l=this._findAnchorToComp(d[n],g)),l=l||this._createToTopAnchor(h,g),a[n][o]=!0,l.type==l.ANCHOR_BOTTOM_TOP&&(m=!0,this._mergeSets(a[n],a[o])),l.type==l.ANCHOR_TOP_TOP&&h.isAnchorable().to.allow&&h.isAnchorable().to.allowBottomBottom!==!1&&this._checkAndAddBottomAnchor(g,h),u.push(l)))}m||p&&p.isAnchorable().to.allow&&(l=null,-1!==t.indexOf(h)||i||(l=this._findAnchorToComp(d[n],p)),l||(l=this._createToParentAnchor(h,p)),u.push(l))}this._setComponentAnchors(h,u)}},_updateOrClearHGroup:function(e){e&&e.$hGroupDirty&&(delete e.$hGroupDirty,this._isValidHGroup(e)?this._updateHGroup(e):this._clearHGroup(e))},_setAnchorableIsLocked:function(e){var t=e.fromComp,i=e.toComp;e.locked=t.isAnchorable().from.lock==Constants.BaseComponent.AnchorLock.NEVER||i.isAnchorable().to.lock==Constants.BaseComponent.AnchorLock.NEVER?!1:t.isAnchorable().from.lock==Constants.BaseComponent.AnchorLock.ALWAYS||i.isAnchorable().to.lock==Constants.BaseComponent.AnchorLock.ALWAYS?!0:e.distance<=this.LOCK_THRESHOLD},_setAnchorableDistance:function(e,t){var i=e.fromComp,n=e.toComp;void 0!==i.isAnchorable().from.distance?t=i.isAnchorable().from.distance:void 0!==n.isAnchorable().to.distance&&(t=n.isAnchorable().to.distance),e.distance=t},_createToParentAnchor:function(e,t){var i=e.getY(),n=e.getPhysicalHeight(),o=t.getInlineContentContainer().getSize().y,r=new this._AnchorClass;return r.type=r.ANCHOR_BOTTOM_PARENT,r.fromComp=e,r.toComp=t,this._setAnchorableDistance(r,o-i-n),this._setAnchorableIsLocked(r),r.topToTop=i,r.originalValue=o,r},_createToTopAnchor:function(e,t){var i=e.getY(),n=t.getY(),o=e.getPhysicalHeight(),r=t.getPhysicalHeight(),s=new this._AnchorClass;return s.fromComp=e,s.toComp=t,n+r>i+o&&n>i+o/2?(s.type=s.ANCHOR_BOTTOM_TOP,this._setAnchorableDistance(s,n-i-o)):(s.type=s.ANCHOR_TOP_TOP,this._setAnchorableDistance(s,n-i)),this._setAnchorableIsLocked(s),s.topToTop=n-i,s.originalValue=n,s},_checkAndAddBottomAnchor:function(e,t){var i=t.getY(),n=e.getY(),o=t.getPhysicalHeight(),r=e.getPhysicalHeight();if(i+o>n+r){var s=new this._AnchorClass;s.type=s.ANCHOR_BOTTOM_BOTTOM,s.fromComp=e,s.toComp=t,this._setAnchorableDistance(s,i+o-n-r),s.locked=s.distance<=this.LOCK_THRESHOLD,s.topToTop=n-i,s.originalValue=o;var a=[];a=a.concat(e.getAnchors()),e.addAnchor(s),this._notifyComponentAnchorsChanged(e,e.getAnchors(),a)}},_getAnchoredY:function(e){switch(e.type){case e.ANCHOR_BOTTOM_TOP:var t=e.fromComp.getPhysicalHeight(),i=e.fromComp.getY()+t;return i+=e.locked?e.distance:this.DEFAULT_MARGIN,Math.max(i,e.fromComp.getY()+t/2);case e.ANCHOR_TOP_TOP:return e.fromComp.getY()+e.distance}},_getAnchoredH:function(e){var t=e.fromComp.getPhysicalHeight(),i=e.fromComp.getY()+t;return e.locked?i+=e.distance:this._isPageAutoShrink()&&this.resources.W.Viewer.isPageComponent(e.toComp.getOriginalClassName())||(i+=this.DEFAULT_MARGIN),e.type==e.ANCHOR_BOTTOM_BOTTOM?i-=e.toComp.getY():e.type==e.ANCHOR_BOTTOM_PARENT&&e.toComp.getInlineContentContainer&&this._isInlineContentNonZeroSize(e.toComp)&&(i+=this._getContainerMarginHeight(e)),i},_isInlineContentNonZeroSize:function(e){return e.getInlineContentContainer().getSize().y>0},_getContainerMarginHeight:function(e){var t=e.toComp;return t.getPhysicalHeight()-t.getInlineContentContainer().getSize().y},enforceAnchors:function(e,t,i,n){if(0!==e.length&&null!==e[0].getViewNode().getParent()){this._validateCommonParent(e);var o=e[0].getParentComponent();n=n||this._getSiblingsYSortedArray(e[0]);var r;if(0!==n.length&&this._validateComponentsRendered(n)){for(r=0;e.length>r;r++)e[r].$layoutDirtyFlag=t?this.FLAG_DIRTY_TOP:this.FLAG_DIRTY_BOTTOM;var s=[];for(r=0;n.length>r;r++){if(s[r]||(s[r]=0),s[r]++,s[r]>20)return this.resources.W.Utils.debugTrace("Layout Manager","enforceAnchors","infinite loop"),this._enforceParentIfNeeded(o),void 0;if(n[r].$tempIndex=r,n[r].$layoutDirtyFlag){for(var a=Number.MAX_VALUE,d=n[r],c=0;d.getAnchors().length>c;c++)a=Math.min(this._enforceSingleAnchor(d.getAnchors()[c],i),a);d.getHorizontalGroup()&&(a=Math.min(this._enforceHGroup(d),a)),delete d.$layoutDirtyFlag,r>a&&(r=a-1)}}for(r=0;n.length>r;r++)delete n[r].$tempIndex,delete n[r].$layoutDirtyFlag;this._enforceParentIfNeeded(o)}else for(r=0;e.length>r;r++)delete e[r].$layoutDirtyFlag}},_enforceParentIfNeeded:function(e){e&&e.$layoutDirtyFlag===this.FLAG_DIRTY_BOTTOM&&this.enforceAnchors([e])},_validateComponentsRendered:function(e){for(var t=0;e.length>t;t++)if(0===e[t].getPhysicalHeight())return!1;return!0},_validateNodesRendered:function(e){for(var t=[],i=0;e.length>i;i++){if(!e[i].getLogic)return!1;t.push(e[i].getLogic())}return this._validateComponentsRendered(t)},validateAnchorTargetsRendered:function(e){for(var t=0;e.length>t;t++)if(!e[t].toComp.isRendered())return!1;return!0},_getContainerContentHeight:function(e){for(var t=0,i=e.getChildComponents(),n=0,o=0;i.length>o;o++)i[o]&&i[o].getLogic&&(n=this._getCompBottom(i[o].getLogic())),t=Math.max(n,t);return t},_getCompBottom:function(e){var t=e.getY(),i=e.getPhysicalHeight();return Math.max(t+i,0)},_getComponentContentHeight:function(e){var t=0;return t=e.getChildComponents&&this._validateNodesRendered(e.getChildComponents())?this._getContainerContentHeight(e):e.getMinPhysicalHeight()},getComponentMinResizeHeight:function(e){if(e.getHorizontalGroup()){var t=this._findAnchorToComp(e.getHorizontalGroup(),e);return this.getHGroupMinBottom(e.getHorizontalGroup())-e.getY()+t.distance}if(e.getChildComponents){var i=this._getContainerContentHeight(e);return e.getInlineContentContainer&&(i=i+e.getPhysicalHeight()-e.getInlineContentContainer().getSize().y),i}return 0},getComponentMinDragY:function(e,t){t||(t=this._emptyArr);for(var i=0,n=0;e.getReverseAnchors().length>n;n++){var o=e.getReverseAnchors()[n];if(!t.contains(o.fromComp))if(o.type==o.ANCHOR_BOTTOM_TOP){var r=this._getCompBottom(o.fromComp);i=Math.max(r,i)}else o.type==o.ANCHOR_TOP_TOP&&(i=Math.max(o.fromComp.getY(),i))}return i},getHGroupMinBottom:function(e){if(2>e.length)return 0;for(var t=-Number.MAX_VALUE,i=0;e.length>i;i++){var n=e[i];t=Math.max(this._getComponentContentHeight(n.toComp)-n.distance+n.toComp.getY(),t)}return t},getHGroupMinY:function(e){if(2>e.length)return 0;for(var t=-Number.MAX_VALUE,i=0;e.length>i;i++){var n=e[i];t=Math.max(this.getComponentMinDragY(n.toComp)-n.topToTop,t)}return t},_enforceHGroup:function(e){var t,i,n=Number.MAX_VALUE,o=e.getHorizontalGroup(),r=this._findAnchorToComp(o,e);if(!r)return Number.MAX_VALUE;if(e.$layoutDirtyFlag==this.FLAG_DIRTY_TOP){var s=this.getHGroupMinY(e.getHorizontalGroup()),a=Math.max(s,r.toComp.getY()-r.topToTop);for(n=Math.min(this._setHGroupPartY(r.fromComp,a),n),i=0;e.getHorizontalGroup().length>i;i++){t=e.getHorizontalGroup()[i];var d=t.fromComp.getY()+t.topToTop;n=Math.min(this._setHGroupPartY(t.toComp,d),n)}}var c=this.getHGroupMinBottom(e.getHorizontalGroup()),l=Math.max(c-r.fromComp.getY(),r.toComp.getY()+r.toComp.getPhysicalHeight()-r.distance-r.fromComp.getY());for(n=Math.min(this._setHGroupPartHeight(r.fromComp,l),n),i=0;e.getHorizontalGroup().length>i;i++){t=e.getHorizontalGroup()[i];var p=t.fromComp.getY()+t.fromComp.getPhysicalHeight()+t.distance-t.toComp.getY();n=Math.min(this._setHGroupPartHeight(t.toComp,p),n)}return n},_setHGroupPartHeight:function(e,t){var i=e.getPhysicalHeight();return i!=t&&(t=t-e.getExtraPixels().bottom-e.getExtraPixels().top,e.setHeight(t),e.$layoutDirtyFlag=this.FLAG_DIRTY_BOTTOM,this._changedByHGroup.include(e),void 0!==e.$tempIndex)?e.$tempIndex:Number.MAX_VALUE},_setHGroupPartY:function(e,t){var i=e.getY();return i!=t&&(e.setY(t),e.$layoutDirtyFlag=this.FLAG_DIRTY_TOP,this._changedByHGroup.include(e),void 0!==e.$tempIndex)?e.$tempIndex:Number.MAX_VALUE},_updateChildAnchors:function(e){if(e&&e.getChildComponents){var t=e.getChildComponents();if(!this._validateNodesRendered(t))return;t.length>0?this._updateAnchors(t[0].getLogic(),[],!0):this._clearReverseAnchorsByScope(e.getReverseAnchors(),!0)}},_getAndClearChangedByHGroup:function(){var e=this._changedByHGroup;return this._changedByHGroup=[],e},_enforceSingleAnchor:function(e,t){return e.type==e.ANCHOR_TOP_TOP&&e.fromComp.$layoutDirtyFlag===this.FLAG_DIRTY_BOTTOM?Number.MAX_VALUE:e.type==e.ANCHOR_BOTTOM_PARENT||e.type==e.ANCHOR_BOTTOM_BOTTOM?this._enforceFromBottomTypeAnchor(e):this._enforceToTopTypeAnchor(e,t)},_enforceToTopTypeAnchor:function(e,t){var i=e.toComp,n=this._getAnchoredY(e),o=i.getY(),r=-Number.MAX_VALUE;return e.type!=e.ANCHOR_BOTTOM_TOP||e.locked||(r=e.originalValue),t||i.setY(n>i.getY()?n:this._getMaxAnchoredY(i,r)),o!==i.getY()&&(i.$layoutDirtyFlag=this.FLAG_DIRTY_TOP),Number.MAX_VALUE},_enforceFromBottomTypeAnchor:function(e){var t=e.toComp,i=t.getPhysicalHeight(),n=this._getAnchoredH(e),o=n;return e.toComp.layoutMinHeight?o=e.toComp.layoutMinHeight():e.locked||this._isPageAutoShrink()&&this.resources.W.Viewer.isPageComponent(t.getOriginalClassName())||(o=e.originalValue),t.setHeight(n>i?n:this._getMaxAnchoredH(t,o)),i!==t.getHeight()&&(t.$layoutDirtyFlag=this.FLAG_DIRTY_BOTTOM,e.type==e.ANCHOR_BOTTOM_BOTTOM)?t.$tempIndex:Number.MAX_VALUE},_getMaxAnchoredH:function(e,t){t||(t=-Number.MAX_VALUE);var i=this._getAnchoredH,n=t;return e.getReverseAnchors().forEach(function(t){if(t.type==t.ANCHOR_BOTTOM_PARENT||t.type==t.ANCHOR_BOTTOM_BOTTOM){var o=i(t);t.locked||this._isPageAutoShrink()&&this.resources.W.Viewer.isPageComponent(e.getOriginalClassName())||(o=Math.max(o,t.originalValue)),n=Math.max(o,n)}}.bind(this)),n},_getMaxAnchoredY:function(e,t){var i=this._getAnchoredY,n=t;return e.getReverseAnchors().forEach(function(e){if(e.type==e.ANCHOR_BOTTOM_TOP||e.type==e.ANCHOR_TOP_TOP){var t=i(e);n=Math.max(t,n)}}),n},_findAnchorToComp:function(e,t){for(var i=0;e.length>i;i++)if(e[i].toComp===t)return e[i]},_mergeSets:function(e,t){for(var i in t)e[i]=!0},isReady:function(){return this._isReady},clone:function(e){return this.parent(e)},_getRenderModifiers:function(){var e=this.resources.W.Viewer._siteStructureData;return e?e.get("renderModifiers")||{}:{}},_isPageAutoShrink:function(){var e=this._getRenderModifiers();return e.pageAutoShrink!==void 0?e.pageAutoShrink:!0},appendSavedAnchor:function(e){this._savedAnchors?Object.append(this._savedAnchors,e):this.setSavedAnchor(e)}})}),define.Class("wysiwyg.managers.WCookiesManager",function(e){var t=e;t.inherits("bootstrap.managers.BaseManager"),t.methods({_initializeExtra:function(){},setCookieParam:function(e,t){var i,n=this.getCookie(e);if(n){if(this.getCookieParams(e).indexOf(t)>=0)return;i=e+"="+n+","+t}else i=e+"="+t;var o=this.writeCookie(i);return o},getCookieParams:function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;i.length>n;n++){for(var o=i[n];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t)){var r=o.substring(t.length,o.length);return r.split(",")}}return[]},removeCookieParam:function(e,t){var i=this.getCookieParams(e);if(0!==i.length&&void 0!==i.length){var n=i.indexOf(t);if(!(0>n)){i.splice(n,1);var o=e+"="+(""+i);return this.writeCookie(o)}}},removeCookie:function(e){this.writeCookie(e+"=")},writeCookie:function(e,t,i,n){var o;if(t)o=new Date((new Date).getTime()+t);else{var r=new Date;r.setYear((new Date).getFullYear()+1),o=r}return e+=";expires="+o.toGMTString(),e+=";path="+(n||"/"),i&&(e+=";domain="+i),document.cookie=e,e},getCookie:function(e){if(document.cookie)for(var t=document.cookie.split(/;\s*/),i=0,n=t.length;n>i;i++){var o=t[i],r=e+"=";if(0===o.indexOf(r))return o.substring(r.length,o.length)}return!1},isReady:function(){return!0},clone:function(e){return this.parent(e)}})}),define.Class("wysiwyg.common.managers.WViewManager",function(e){var t=e;t.inherits("core.managers.viewmanager.ViewManagerBase"),t.utilize(["wysiwyg.managers.appdata.AppDataHandler"]),t.binds(["_fireScreenResizeEvent","_onSiteReady","_onPageNavigation","_setDocumentTitle","_notifySiteReadyForThumbnail"]),t.resources(["W.Utils","W.TPA","W.Commands"]),t.statics({SCREEN_RESIZE_EVENT:"ScreenResize"}),t.methods({initialize:function(){this.parent(),this._isPageScrollToTopEnabled=!1,this.initScreenResizeEventPropagation(),this._registerCommands(),this.addHeightChangeCallback(function(){return W.Layout.getComponentMinResizeHeight(this.getSiteNode().getLogic())}.bind(this))},setSite:function(e,t,i){this.parent(e,t,i);var n=this._siteNode.getElement("#SITE_PAGES");n&&n.getProperty("comp")&&(this._pageGroupComp=n,this._pageGroupComp.addEvent("pageTransitionEnded",this._onPageNavigation));var o=$(document.body);this.getPreviewMode()?o.setStyle("overflow","hidden"):(o.setStyle("overflow-y","scroll"),o.setStyle("overflow-x","auto"))},setAdData:function(e){this._adData=e},getAdData:function(){return this._adData},_onPageNavigation:function(e){this._setDocumentTitle(e),this.resources.W.Commands.executeCommand("WViewerCommands.MediaZoom.Close"),this.fireEvent("pageTransitionEnded",e)},getSiteTitleSEO:function(){return window.rendererModel.siteTitleSEO},isPremiumUser:function(){var e=window.rendererModel;return e&&e.premiumFeatures?e.premiumFeatures.length>0:!1},_setDocumentTitle:function(e){var t="",i=W.Viewer.getPagesData()[e],n=i.get("pageTitleSEO")||"",o=i.get("title")||"",r=W.Viewer.getSiteTitleSEO()||"",s=W.Viewer.isHomePage(e);n?t=n:(t=r,s||(t+=t?" | ":"",t+=o)),W.Viewer.isPremiumUser()||(t+=t?" | ":"",t+="Wix.com"),t&&(document.title=t)},_updateDocWidth:function(){var e=this._siteStructureData,t=e.get("renderModifiers"),i=this.injects().Utils.getQueryParam("siteWidth");if(i)return this._docWidth=parseInt(i,10),t.siteWidth=this._docWidth,e.markDataAsDirty(),void 0;if(t&&t.siteWidth)return this._docWidth=t.siteWidth,void 0;switch(window.rendererModel.applicationType){case"HtmlFacebook":this._docWidth="520";break;case"HtmlWeb":this._docWidth="980";break;default:this._docWidth=980}},_pageTransition:function(e){this._currentPageId=e,this._pageGroupComp?this._pageGroupComp.getLogic().gotoPage(e):this.parent(e)},getDocWidth:function(){return this._docWidth||this._updateDocWidth(),this._docWidth},initScreenResizeEventPropagation:function(){$(window).addEvent("resize",this._fireScreenResizeEvent)},indexPages:function(e){var t=this._siteNode.getElement(e);if(!t)return this.resources.W.Utils.callLater(this.indexPages,[e],this,10);var i={},n=[];this._getPageElements(t).each(function(e){var t=e.get("id")||this.resources.W.Utils.getUniqueId("page");i[t]=e,e.addClass("sitePage");var o=e.get("dataQuery");n.push(o)}.bind(this)),n=this._fixPagesOrderByNewMenuData(n);var o=this._siteStructureData.getData().pages;o=o||[];var r;for(r=0;o.length>r;++r){var s=o[r],a=n.indexOf(s);-1!=a&&(n.splice(a,1),n.splice(r,0,s))}var d=W.Data.isDataChange();this._siteStructureData.set("pages",n),(void 0===this._siteStructureData.get("mainPage")||""===this._siteStructureData.get("mainPage"))&&this._siteStructureData.set("mainPage",n[0]),d&&W.Data.flagDataChange(),this._pages=i},_getPageElements:function(e){var t="[comp=mobile.core.components.Page],[comp=core.components.Page]";return e.getElements(t)},isPageComponent:function(e){return"mobile.core.components.Page"===e||"core.components.Page"===e},getPages:function(){return this._pages},getLinkablePagesData:function(){return this._pagesData},_fixPagesOrderByNewMenuData:function(e){if(W.Data.isDataAvailable("#MAIN_MENU")){var t,i=W.Data.getDataByQuery("#MAIN_MENU"),n=i.getAllItems(),o=n.length;for(t=0;o>t;t++){var r=n[t],s=r.get("refId"),a=$$("[dataquery="+s+"]");0===a.length&&i.deleteNavigationItem(s)}n=i.getAllItems(),e=n.map(function(e){return e.get("refId")})}return e},_fireScreenResizeEvent:function(){this.fireEvent(this.SCREEN_RESIZE_EVENT)},_onSiteReady:function(){this.parent(),W.Layout.attachSavedAnchors(),this._fireScreenResizeEvent(),this.getSiteNode()&&this.getSiteNode().getLogic&&this.siteHeightChanged(),this.resources.W.Utils.callLater(this._notifySiteReadyForThumbnail)},_notifySiteReadyForThumbnail:function(){"true"===this.resources.W.Utils.getQueryParam("siteReadyAlert");var e=this.resources.W.Utils.getQueryParam("siteReadyPost");if(e){var t=new Request.JSON({url:e});t.post({siteReady:!0})}},getSiteHeight:function(){return this._siteHeight},setAdHeight:function(e){this._adHeight=e},addHeightChangeCallback:function(e){this._heightChangeCallbacks=this._heightChangeCallbacks||[],this._heightChangeCallbacks.push(e)},_getHeightFromCallback:function(){if(!this._heightChangeCallbacks)return 0;var e,t=0;for(e=0;this._heightChangeCallbacks.length>e;e++)t+=this._heightChangeCallbacks[e]();return t},siteHeightChanged:function(e){this.getSiteNode().getLogic().flushPhysicalHeightCache(),this._siteHeight=this._getHeightFromCallback(),this.fireEvent("resize",this._siteHeight),e||this.getSiteNode().getLogic().setHeight(this._siteHeight),this._postHeightMessage()},_postHeightMessage:function(){var e=parent.postMessage?parent:parent.document.postMessage?parent.document:void 0;e&&e!==void 0&&e.postMessage(this._siteHeight,"*")},addOrientationEvent:function(){},getPageGroup:function(){return this._siteNode.getElement("#SITE_PAGES").getLogic()},_registerCommands:function(){var e=this.resources.W.Commands;e.registerCommandAndListener("WViewerCommands.AdminLogin.Open",this,this._openAdminLogin),e.registerCommandAndListener("WViewerCommands.AdminLogin.Close",this,this._closeAdminLogin),e.registerCommandListenerByName("WPreviewCommands.WEditModeChanged",this,this._onEditModeChanged),e.registerCommandAndListener("WViewerCommands.OpenZoom",this,this.setZoomData),e.registerCommandAndListener("WViewerCommands.SiteMembers.Open",this,this._openSiteMembersPopup),e.registerCommandAndListener("WViewerCommands.SiteMembers.Close",this,this._closeSiteMembersPopup),e.registerCommandAndListener("WViewerCommands.PasswordLogin.Open",this,this._openPasswordLogin),e.registerCommandAndListener("WViewerCommands.PasswordLogin.Close",this,this._closePasswordLogin)},_openAdminLogin:function(e){e||(e={}),e.clazz="wysiwyg.viewer.components.AdminLogin",e.dataItem=W.Data.createDataItem({type:"Text"}),this._openPasswordLogin(e)},_closeAdminLogin:function(){this._closePasswordLogin()},removeMediaZoom:function(){this._mediaZoom&&(this._mediaZoom.removeFromDOM(),delete this._mediaZoom)},_setMediaZoomDataInner:function(e){e.mediaList?this._mediaZoom.getLogic().setGallery(e.mediaList,e.currentIndex):e.imageData&&this._mediaZoom.getLogic().setImage(e.imageData)},enterFullScreenMode:function(){if(!this._isFullScreen){var e=this.getPreviewMode()?$(window.parent.document.body):$(document.body);this._originalBodyOverflow=e.getStyle("overflow"),e.setStyle("overflow","hidden"),this._isFullScreen=!0}},exitFullScreenMode:function(){if(this._isFullScreen){this._currentPageId?this._setUrlHashToPage(this._currentPageId):this.goToHomePage();var e=this.getPreviewMode()?$(window.parent.document.body):$(document.body);e.setStyle("overflow",this._originalBodyOverflow),this._isFullScreen=!1}},_onHashChange:function(e){if(e=e||{},this.isSiteReady()){var t=e.newHash;"zoom"==t||W.Data.isDataAvailable("#"+t)?this._handleValidHashChange(e):this._changePageFromHash(t)}},_onHashDataItemIdChange:function(e,t){var i=t.getType&&t.getType();return this._isPageDataType(i)&&e?(this._changePageFromHash(e),void 0):("Image"===i?this.resources.W.Commands.executeCommand("WViewerCommands.OpenZoom",{item:"#"+t.get("id"),getDisplayerDivFunction:this.getDefaultGetZoomDisplayerFunction("Image")},this):"PermaLink"==i&&"ListsApps"==t.get("appType")&&W.Apps.openPermaLink(t),void 0)},_isPageDataType:function(e){return"Page"===e},_onPageExtraDataChange:function(e,t,i){var n=this._getPageDataFromHash(t);if(this.resources.W.TPA.setPageState(t,e),!i){var o=n.get("tpaApplicationId"),r=this.resources.W.TPA.getComponentRegistrar().getSection(o);r&&r._updateIframe(!0)}},_setUrlHashToPage:function(e){var t=this._pagesData[e];if(t){var i=this.resources.W.TPA.getPageState(e);this.resources.W.Utils.hash.setHash(e,t.get("pageUriSEO"),i)}},getAppDataHandler:function(){return this._appDataHandler||(this._appDataHandler=new this.imports.AppDataHandler),this._appDataHandler},_handleValidHashChange:function(e){var t=e.newHash,i=e.extData,n=e.isIdChanged,o=e.isExtDataChanged,r=e.silent,s=this._zoomComp&&this._zoomComp.getLogic&&this._zoomComp.getLogic().isZoomOpened();n&&!r&&t&&("zoom"==t&&(t=i.split("/")[1]),W.Data.getDataByQuery("#"+t,function(e){this._onHashDataItemIdChange(t,e)}.bind(this)),e.isForSureAfterChange&&LOG.reportPageEvent(window.location.href)),o&&(s?this._zoomComp.getLogic().showZoomImage():this._onPageExtraDataChange(i,t,r))},getDefaultGetZoomDisplayerFunction:function(e){return"Image"==e?function(e,t,i){var n=this._getZoomDisplayerCompSettings();this.injects().Components.createComponent(n.comp,n.skin,e,{maxWidth:t.x,maxHeight:t.y},null,function(e){i(e.getViewNode())})}.bind(this):void 0},_getZoomDisplayerCompSettings:function(){return{comp:"wysiwyg.viewer.components.MediaZoomDisplayer",skin:"wysiwyg.viewer.skins.displayers.MediaZoomDisplayerSkin"}},getDefaultGetHashPartsFunction:function(e){return"Image"==e?function(e,t){W.Data.getDataItem(e,function(e){t({id:"zoom",title:e.get("title"),extData:this.getCurrentPageId()+"/"+e.get("id")})}.bind(this))}.bind(this):void 0},setZoomData:function(e){this._initZoomIfNeeded(function(t){this._zoomComp=t.getViewNode(),this._setZoomDataInner(e)}.bind(this))},removeZoomElement:function(){this._zoomComp&&(this._zoomComp.removeFromDOM(),delete this._zoomComp)},_setZoomDataInner:function(e){e.itemsList?this._zoomComp.getLogic().setGallery(e.itemsList,e.currentIndex,e.getDisplayerDivFunction,e.getHashPartsFunction,e.extraParams):e.item&&this._zoomComp.getLogic().setImage(e.item,e.getDisplayerDivFunction,e.getHashPartsFunction)},_initZoomIfNeeded:function(e){if(this._zoomComp)e&&e(this._zoomComp.getLogic());else{var t=this._getZoomCompSettings();this._zoomComp=W.Components.createComponent(t.comp,t.skin,null,null,function(e){e.getViewNode().insertInto(this._siteNode)}.bind(this),e)}},_getZoomCompSettings:function(){return{comp:"wysiwyg.viewer.components.MediaZoom",skin:"wysiwyg.viewer.skins.MediaZoomSkin"}},_openSiteMembersPopup:function(e){this.injects().SiteMembers.openSiteMembersPopup(e)},_closeSiteMembersPopup:function(){this.injects().SiteMembers.closeSiteMembersPopup()},_openPasswordLogin:function(e){if(!this._passwordLogin){var t=e&&e.args,i=e&&e.clazz||"wysiwyg.viewer.components.PasswordLogin",n=e&&e.dataItem||null;W.Components.createComponent(i,"wysiwyg.viewer.skins.PasswordLoginSkin",n,t,function(){},function(e){this._passwordLogin=e;var t=e.getViewNode();t.setStyle("opacity","0"),e.getViewNode().insertInto(this._siteNode),e.centerDialog(),new Fx.Tween(t,{duration:"short",link:"ignore"}).start("opacity","1.0")}.bind(this))}},_closePasswordLogin:function(){if(this._passwordLogin){var e=this._passwordLogin.getViewNode(),t=new Fx.Tween(e,{duration:"short",link:"ignore"}),i=function(){t.removeEvent("complete",i),e.removeFromDOM(),delete this._passwordLogin}.bind(this);t.addEvent("complete",i),t.start("opacity","0.0")}},_changePageFromHash:function(e){var t=this._getPageDataFromHash(e);if(null!==t){var i=t.get("id");i!=this._currentPageId&&this._checkRequireLogin(t,function(){i&&this._pageTransition(i)}.bind(this))}},goToPage:function(e,t){if(t)return this.parent(e),void 0;
var i=this._pagesData[e];this._checkRequireLogin(i,function(){this.goToPage(e,!0)}.bind(this))},getPageData:function(e){return this._pagesData[e]},getSiteName:function(){return window.rendererModel.siteName||""},_checkRequireLogin:function(e,t){var i=this.isPublicMode()||"PREVIEW"==this.getEditorMode(),n=e.get("pageSecurity"),o=e.get("id"),r=this._getFallbackPage(o),s=!r;if(i&&n.requireLogin&&!this.injects().SiteMembers.isLoggedIn()&&!this._isProtectedPageValidated(o)){var a="",d=e.get("pageUriSEO"),c=this.resources.W.Utils.hash.getHashPartsString(o,d,a);this.injects().SiteMembers.openSiteMembersPopup({disableCancel:s,hashRedirectTo:"#"+c,openedByPageSecurity:!0,authCallback:function(e){this._onAuthCallback(e,o,r,t)}.bind(this)})}else i&&n.passwordDigest&&!this._isProtectedPageValidated(o)?this.resources.W.Commands.executeCommand("WViewerCommands.PasswordLogin.Open",{args:{digestedPassword:n.passwordDigest,disableCancel:s,authCallback:function(e){this._onAuthCallback(e,o,r,t)}.bind(this)}}):t()},_onAuthCallback:function(e,t,i,n){e.authResponse?(this._setPageValidated(t),n()):e.data&&e.data.cancel&&(i?location.hash=i:location.reload())},_getFallbackPage:function(e){var t=this.injects().Viewer.getCurrentPageId(),i=!!t,n=W.Data.getDataMap().SITE_STRUCTURE.get("mainPage");return n=n?n.replace("#",""):"",i?t:e!=n?n:null},_setPageValidated:function(e){this._validatedPages||(this._validatedPages={}),this._validatedPages[e]=!0},setPageAsNotValidated:function(e){this._validatedPages||(this._validatedPages={}),this._validatedPages[e]=!1},_isProtectedPageValidated:function(e){return this._validatedPages&&this._validatedPages[e]},clone:function(e){return this.parent(e)}})}),define.Class("wysiwyg.managers.appdata.AppDataHandler",function(e){var t=e;t.methods({getAppsData:function(){return window.rendererModel||(window.rendererModel={}),window.rendererModel.clientSpecMap||(window.rendererModel.clientSpecMap={}),window.rendererModel.clientSpecMap},registerAppData:function(e){this.getAppsData()[e.applicationId]=e},getAppData:function(e){return this.getAppsData()[e]||{}},getAppDataByAppDefinitionId:function(e){var t=this.getAppsData(),i={};return Object.filter(t,function(t){return t.appDefinitionId===e?(i=t,!0):void 0}),i},getWidgetData:function(e,t){var i=this.getAppData(e).widgets||{};return i[t]||{}},getSiteMembersData:function(){var e=Object.filter(this.getAppsData(),function(e){return e&&e.type&&"sitemembers"==e.type.toLowerCase()}),t=Object.values(e);return t&&t.length>0?t[0]:null},getWidgetProperty:function(e,t,i){return this.getWidgetData(e,t)[i]},getLargestApplicationId:function(){var e=this.getAppsData(),t=0;for(var i in e)e.hasOwnProperty(i)&&(i=parseInt(i,10),i>t&&(t=i));return t}})}),define.Class("wysiwyg.common.managers.classdata.Anchor",function(e){var t=e;t.fields({ANCHOR_TOP_TOP:"TOP_TOP",ANCHOR_BOTTOM_TOP:"BOTTOM_TOP",ANCHOR_BOTTOM_BOTTOM:"BOTTOM_BOTTOM",ANCHOR_BOTTOM_PARENT:"BOTTOM_PARENT",ANCHOR_LOCK_BOTTOM:"LOCK_BOTTOM",type:"BOTTOM_TOP",distance:0,topToTop:0,locked:!1,fromComp:null,toComp:null,originalValue:0/0})}),define.dataSchema("AudioPlayer",{uri:{type:"string","default":""},autoPlay:{type:"Boolean","default":!1},loop:{type:"Boolean","default":!1},visible:{type:"Boolean","default":!0},volume:{type:"number","default":100},title:{type:"string","default":""},description:{type:"string","default":""},icon_uri:{type:"string","default":""},originalFileName:{type:"string","default":""}}),define.dataSchema("Boolean",{value:"boolean"}),define.dataSchema("ContactForm",{toEmailAddress:"string",bccEmailAddress:"string"}),define.dataSchema("EbayItemsBySeller",{sellerId:"string",registrationSite:"string"}),define.dataSchema("EditorSettings",{palletsFilterTags:"array",fontsFilterTags:"array",pagesFilterTags:"array"}),define.dataSchema("FlashComponent",{"extends":"Link",title:"string",uri:"string",description:"string",height:"number",width:"number",placeHolderImage:"ref"}),define.dataSchema("FlickrBadgeWidget",{userId:{type:"string","default":"74009459@N07"},userName:"string",tag:"string",imageCount:{type:"number","default":3},whichImages:{type:"string","default":"latest"},imageSize:{type:"string","default":"t"},layoutOrientation:{type:"string","default":"v"}}),define.dataSchema("GeoMap",{address:{type:"string","default":"10 West 18th St. New york, NY 10011"},latitude:{type:"number","default":"40.73"},longitude:{type:"number","default":"-74"},addressInfo:{type:"string","default":"Wix Lounge NYC"}}),define.dataSchema("HomePageLogin",{postLoginUrl:{type:"string","default":"http://www.wix.com",description:"some amazing description"},postSignUpUrl:{type:"string","default":"http://www.wix.com",description:"some amazing description"},startWith:{type:"string","enum":["login","createUser"],"default":"login",description:"some amazing description"}}),define.dataSchema("HtmlComponent",{sourceType:"string",url:"string"}),define.dataSchema("list",{items:"array"}),define.dataSchema("MenuData",{menuButton:"ref",pages:"ref"}),define.dataSchema("PayPalButton",{merchantID:{type:"string","default":"",description:"some amazing description"}}),define.dataSchema("PermaLink",{appType:{type:"string","enum":["ListsApps","ThirdPartyApps"]},dataItemRef:"ref",mutableSeoTitle:"string",correctPermaLinkRef:"ref"}),define.dataSchema("SelectOption",{value:"string",text:"string",enabled:{type:"boolean","default":"true"},description:"string"}),define.dataSchema("SelectableList",{items:{type:"refList",description:"a list of data items or data queries to select from","default":[]},selected:{type:"ref",description:"the selected data item/query","default":null}}),define.dataSchema("SiteButton",{"extends":"Link",label:{type:"string","default":"MY BUTTON"}}),define.dataSchema("SoundCloudWidget",{url:{type:"string","default":""},showArtWork:{type:"Boolean","default":!0},autoPlay:{type:"Boolean","default":!1},embedSource:{type:"string","default":""}}),define.dataSchema("TPA",{applicationId:{type:"string","default":"",description:"application ID"},appDefinitionId:{type:"string","default":"",description:"application Definition Id"}}),define.dataSchema("TPAGluedProperties",{placement:{type:"string","default:":"BOTTOM_RIGHT",description:"widget placement"},verticalMargin:{type:"string","default:":"0",description:"widget vertical margin"},horizontalMargin:{type:"string","default:":"0",description:"widget horizontal margin"}}),define.dataSchema("TPAWidget",{"extends":"TPA",widgetId:{type:"string","default":"",description:"some amazing description"}}),define.dataSchema("Table",{items:"refList",header:"refList",footer:"refList"}),define.dataSchema("Video",{videoId:"string",videoType:"string"}),define.dataSchema("WixHomepageMenu",{menuDataSource:{type:"string","enum":["topMenu","bottomMenu"],"default":"topMenu",description:"some amazing description"}}),define.dataSchema("ButtonProperties",{align:{type:"string","enum":["left","center","right"],"default":"center",description:"alignment of the menu"},margin:{type:"number","default":0,description:"text left and right margins"}}),define.dataSchema("ComboBoxInputProperties",{hasPrompt:{type:"boolean","default":!1,description:"Display prompt in combo"},promptText:{type:"string","default":"",description:"The text that will be displayed in the prompt"},promptValue:{type:"number","default":-1,description:"Data of prompt option"}}),define.dataSchema("EbayItemsBySellerProperties",{headerImage:{type:"string","enum":["0","2","3","4","5","6","7","8","9","10","11"],"default":0,description:"The widget's header"}}),define.dataSchema("FlashComponentProperties",{displayMode:{type:"string","enum":["original","fit","stretch"],"default":"original",description:"displayMode of the movie"}}),define.dataSchema("GalleryExpandProperties",{expandEnabled:{type:"boolean","default":!0},goToLinkText:{type:"string","default":"Go to link"},galleryImageOnClickAction:{type:"string","default":"unset","enum":["disabled","zoomMode","goToLink"]}}),define.dataSchema("GoogleMapProperties",{showZoom:{type:"boolean","default":!0,description:"show zoom control"},showPosition:{type:"boolean","default":!0,description:"show position control"},showStreetView:{type:"boolean","default":!0,description:"show Street View control"},showMapType:{type:"boolean","default":!0,description:"show map type control"},mapDragging:{type:"boolean","default":!0,description:"show map type control"},mapType:{type:"string","enum":["ROADMAP","TERRAIN","SATELLITE","HYBRID"],"default":"ROADMAP",description:"show zoom control"}}),define.dataSchema("HorizontalMenuProperties",{alignButtons:{type:"string","enum":["left","center","right"],"default":"center",description:"alignment of the menu buttons"},alignText:{type:"string","enum":["left","center","right"],"default":"center",description:"alignment of the menu buttons' text"},sameWidthButtons:{type:"boolean","default":!1,description:"Keep buttons the same size"},moreButtonLabel:{type:"string","default":"More",description:'Label to use for "more button"'},moreItemHeight:{type:"number","default":15,description:"height of items in the more menu"},stretchButtonsToMenuWidth:{type:"boolean","default":!0,description:""}}),define.dataSchema("LayoutProperties",{x:{type:"number","default":0,description:"x position"},y:{type:"number","default":0,description:"y position"},w:{type:"number","default":100,description:"width"},h:{type:"number","default":100,description:"height"},anchors:{type:"array",description:"list of anchors"}}),define.dataSchema("LinkBarProperties",{gallery:{type:"string","default":"clipart",description:"gallery type (photos, icons, backgrounds, etc..)"},iconSize:{type:"number","default":30,description:"Icon Size",minimum:16,maximum:128},spacing:{type:"number","default":5,description:"Spacing",minimum:1,maximum:50},bgScale:{type:"number","default":1,description:"Background scale",minimum:0,maximum:2},orientation:{type:"string","enum":["HORIZ","VERT"],"default":"HORIZ",description:"Orientation"}}),define.dataSchema("MatrixGalleryProperties",{"extends":"GalleryExpandProperties",imageMode:{type:"string","default":"clipImage","enum":["clipImage","flexibleWidthFixed"]},numCols:{type:"number","default":3,description:"Number of columns",minimum:1,maximum:10},maxRows:{type:"number","default":2,description:"Maximum number of rows",minimum:1,maximum:10},incRows:{type:"number","default":2,description:"Row number increase",minimum:1,maximum:10},margin:{type:"number","default":15,description:"Margin around each item",minimum:0,maximum:250}}),define.dataSchema("NumberInputProperties",{minValue:{type:"number","default":0,description:"minimum allowed value"},maxValue:{type:"number","default":999,description:"maximum allowed value"}}),define.dataSchema("PageGroupProperties",{transition:{type:"string","enum":["none","swipeHorizontalFullScreen","swipeVerticalFullScreen","crossfade","outIn"],"default":"slide",description:"page transition"}}),define.dataSchema("PaginatedGridGalleryProperties",{"extends":"GalleryExpandProperties",imageMode:{type:"string","default":"clipImage","enum":["clipImage"]},numCols:{type:"number","default":3,description:"Number of columns",minimum:1,maximum:10},maxRows:{type:"number","default":3,description:"Maximum number of rows",minimum:1,maximum:10},margin:{type:"number","default":0,description:"Margin around each item",minimum:0,maximum:250},transition:{type:"string","default":"seq_crossFade_All","enum":["none","seq_crossFade_All","seq_shrink_All","swipe_horiz_All","swipe_vert_All","seq_random"]},transDuration:{type:"number",minimum:0,maximum:5,"default":1,description:"Duration of the transition in sec"},autoplayInterval:{type:"number","default":3,minimum:0,maximum:30,description:"Autplay interval"},autoplay:{type:"boolean","default":!1,description:""},showAutoplay:{type:"boolean","default":!0,description:""},showNavigation:{type:"boolean","default":!0,description:""},showCounter:{type:"boolean","default":!0,description:""}}),define.dataSchema("PayPalButtonProperties",{buttonType:{type:"string","enum":["buy","donate"],"default":"buy",description:"buy or donate button"},itemName:{type:"string","default":"",description:"some amazing description"},itemID:{type:"string","default":"",description:"some amazing description"},organizationName:{type:"string","default":"",description:"some amazing description"},organizationID:{type:"string","default":"",description:"some amazing description"},amount:{type:"string","default":"",description:"some amazing description"},currencyCode:{type:"string","enum":["USD","GBP","NIS"],"default":"USD",description:"Currency Code"},target:{type:"string","enum":["_self","_blank"],"default":"_blank",description:"Currency Code"},showCreditCards:{type:"boolean","default":!0,description:"Show credit card symbols"},smallButton:{type:"boolean","default":!1,description:"use small button"}}),define.dataSchema("ButtonProperties",{align:{type:"string","enum":["left","center","right"],"default":"center",description:"alignment of the menu"},margin:{type:"number","default":0,description:"text left and right margins"}}),define.dataSchema("SlideShowGalleryProperties",{"extends":"GalleryExpandProperties",imageMode:{type:"string","default":"clipImage","enum":["clipImage","flexibleHeight"]},transition:{type:"string","enum":["none","swipeVertical","swipeHorizontal","crossfade","outIn"],"default":"swipeHorizontal",description:"Transition between items of the gallery"},autoplayInterval:{type:"number","default":"5",minimum:0,maximum:30,description:"Autplay interval"},autoplay:{type:"boolean","default":!1,description:""},transDuration:{type:"number",minimum:0,maximum:5,"default":1,description:"Duration of the transition in sec"},bidirectional:{type:"boolean","default":!0,description:"Decides whether the transition direction reflects Prev/Next"},reverse:{type:"boolean","default":!1,description:"If bidirectional, inverts the direction of transitions"},showAutoplay:{type:"boolean","default":!0,description:""},showNavigation:{type:"boolean","default":!0,description:""},showCounter:{type:"boolean","default":!0,description:""}}),define.dataSchema("SliderGalleryProperties",{"extends":"GalleryExpandProperties",imageMode:{type:"string","default":"clipImage","enum":["clipImage","flexibleWidth"]},margin:{type:"number","default":15,description:"Margin around each item",minimum:0,maximum:250},maxSpeed:{type:"number","default":"5",minimum:1,maximum:30,description:"Speed"},aspectRatio:{type:"number",minimum:.1,maximum:3,"default":1,description:""},aspectRatioPreset:{type:"string","enum":["16:9","4:3","1:1","3:4","9:16"],"default":"4:3"},loop:{type:"boolean","default":!0,description:""},showCounter:{type:"boolean","default":!0,description:""}}),define.dataSchema("TableComponentProperties",{minHeight:{type:"number","default":void 0,description:"minimum allowed value"}}),define.dataSchema("TwitterFeedProperties",{numOfTweets:{type:"number","default":"5",description:"Number of tweets in feed"},subject:{type:"string","default":"What's being said about...",description:"subject line"},title:{type:"string","default":"Me...",description:"title line"}}),define.dataSchema("VideoProperties",{autoplay:{type:"boolean","default":!1,description:"video autoplay on load"},loop:{type:"boolean","default":!1,description:"play video in a loop"},showinfo:{type:"boolean","default":!1,description:"show video title and author"},lightTheme:{type:"boolean","default":!1,description:"show video with light theme"},showControls:{type:"string","enum":["always_show","always_hide","temp_show"],"default":"always_show",description:"show / hide controls"}}),define.dataSchema("WFacebookCommentProperties",{numPosts:{type:"number","default":2,minimum:0,maximum:10,description:"the number of posts display by default"},width:{type:"number","default":"555",description:"the width of the plugin, in pixels"},colorScheme:{type:"string","enum":["light","dark"],"default":"light",description:"the color scheme of the plugin"}}),define.dataSchema("WFacebookLikeProperties",{layout:{type:"string","enum":["standard","button_count","box_count"],"default":"standard",description:"the layout of the button"},send:{type:"boolean","default":!1,description:"enable/disable the send button"},show_faces:{type:"boolean","default":!1,description:"show the faces of your friends that liked this item"},width:{type:"string","default":"225",description:"the width of the Like button"},action:{type:"string","enum":["like","recommend"],"default":"like",description:" the verb to display on the button. Options: *like*, *recommend*"},font:{type:"string","enum":["helvetica","arial","lucida grande","segoe ui","tahoma","trebuchet ms","verdana"],"default":"helvetica",description:"the font to display in the button"},colorScheme:{type:"string","enum":["light","dark"],"default":"light",description:"the color scheme for the like button"}}),define.dataSchema("WGooglePlusOneProperties",{size:{type:"string","enum":["small","medium","standard","tall"],"default":"standard",description:"The button size to render"},annotation:{type:"string","enum":["none","bubble","inline"],"default":"inline",description:"The annotation to display next to the button."},width:{type:"string","default":"",description:"If annotation is set to *inline*, the width in pixels to use for the button and its inline annotation. If omitted, a button and its inline annotation use 450px."}}),define.dataSchema("WPhotoProperties",{displayMode:{type:"string","enum":["fill","full","stretch","fitWidth","fitWidthStrict","fitHeightStrict"],"default":"fill",description:"displayMode of the photo"}}),define.dataSchema("WTwitterFollowProperties",{showCount:{type:"boolean","default":!0,description:"Followers count display"},showScreenName:{type:"boolean","default":!0,description:"Show screen name"},textColor:{type:"hexcolor","default":"",description:"HEX color code for the text color"},linkColor:{type:"hexcolor","default":"",description:"HEX color code for the Username link color"},width:{type:"number","default":"100",description:"width of the Follow Button"},dataLang:{type:"string","enum":["en","fr","de","it","es","ko","ja"],"default":"en",description:"The language for the Tweet Button"}}),define.dataSchema("WTwitterTweetProperties",{dataCount:{type:"string","enum":["none","horizontal","vertical"],"default":"horizontal",description:"Count box position"},dataLang:{type:"string","enum":["en","fr","de","it","es","ko","ja"],"default":"en",description:"The language for the Tweet Button"}}),define.experiment.newClass("wysiwyg.common.utils.AutoPlay.NBC_SlideShowGallery.New",function(e){var t=e;t.inherits("bootstrap.managers.events.EventDispatcher"),t.resources(["W.Utils"]),t.statics({AUTOPLAY_EVENT:"autoPlayEvent",AUTOPLAY_STATE:{PAUSE:0,PLAY:1}}),t.methods({initialize:function(e){this._currentState=this.AUTOPLAY_STATE.PAUSE,this._delayTime=e||5e3,this._callLaterIndex=-1},play:function(){this._currentState===this.AUTOPLAY_STATE.PAUSE&&(this._currentState=this.AUTOPLAY_STATE.PLAY,this._startTimer())},pause:function(){this._currentState===this.AUTOPLAY_STATE.PLAY&&(this._currentState=this.AUTOPLAY_STATE.PAUSE,this.resources.W.Utils.clearCallLater(this._callLaterIndex))},setDelay:function(e){this._delayTime=1e3*e},getAutoPlayState:function(){return this._currentState},_startTimer:function(){this._callLaterIndex=this.resources.W.Utils.callLater(this._onTimer,null,this,this._delayTime)},_onTimer:function(){this._isPlaying()&&(this.trigger(this.AUTOPLAY_EVENT,this),this._startTimer())},isPlaying:function(){return this._isPlaying()},_isPlaying:function(){return this._currentState===this.AUTOPLAY_STATE.PLAY}})}),define.Const("TransitionTypes",{SWIPE_HORIZONTAL:"swipeHorizontal",SWIPE_HORIZONTAL_FULLSCREEN:"swipeHorizontalFullScreen",SWIPE_VERTICAL:"swipeVertical",SWIPE_VERTICAL_FULLSCREEN:"swipeVerticalFullScreen",CROSS_FADE:"crossfade",SHRINK_FADE:"shrinkfade",OUT_IN:"outIn",NONE:"none"}),define.dataSchema("map",{templates:"object"}),define.dataItem.multi({CK_EDITOR_FONT_STYLES:{type:"map",metaData:{isPreset:!0,isHidden:!1,description:"",isPersistent:!1},items:{font_0:{seoTag:"h1",label:"FONT_0_LABEL"},font_1:{seoTag:"h2",label:"FONT_1_LABEL"},font_2:{seoTag:"h2",label:"FONT_2_LABEL"},font_3:{seoTag:"h3",label:"FONT_3_LABEL"},font_4:{seoTag:"h4",label:"FONT_4_LABEL"},font_5:{seoTag:"h5",label:"FONT_5_LABEL"},font_6:{seoTag:"h6",label:"FONT_6_LABEL"},font_7:{seoTag:"p",label:"FONT_7_LABEL"},font_8:{seoTag:"p",label:"FONT_8_LABEL"},font_9:{seoTag:"p",label:"FONT_9_LABEL"},font_10:{seoTag:"p",label:"FONT_10_LABEL"}}}}),define.Class("external_apis.flickr.FlickrAPI",function(e){var t=e;t.fields({_apiKey:"0f1c119e0c156ac4b80052270d0a3202",_apiURL:"http://api.flickr.com/services/rest/?format=json",_callback:void 0}),t.methods({getUserID:function(e,t){var i;i={method:"flickr.people.findByUsername",username:e},this._callback=t,this._call(i,function(e){var i,n;i="fail"!=e.stat,n=e.message,i===!0?t(i,e.user.id):t(i,n)})},getTags:function(e,t){var i;i={method:"flickr.tags.getListUser",user_id:e},this._callback=t,this._call(i,function(e){var i,n;n="fail"!=e.stat,i=e.message,n===!0?t(n,e.who.tags.tag):t(n,i)})},_call:function(e,t){e.api_key=this._apiKey;var i=new Request.JSONP({url:this._apiURL,callbackKey:"jsoncallback",data:e,onComplete:t,timeout:5e3,onFailure:this._handleTimeout});i.send()},_handleTimeout:function(){this._callback&&this._callback(!1,"Failed connecting to Flickr. Please try again in a few minutes.")}})});