define.deployment("deployment.BaseClasses",function(e){function t(){return window.editorModel&&window.editorModel.runningExperiments?editorModel.runningExperiments:window.rendererModel&&window.rendererModel.runningExperiments?rendererModel.runningExperiments:{}}function r(e){for(var t=document.cookie.split(";"),r=e,n=0;t.length>n;n++){for(var i=t[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(r))return i=i.substring(r.length,i.length),i.replace("=","")}return""}function n(e,t){var r=t?"i":"",n=RegExp("[?&]"+e+"=([^&]+)",r),i=window.location.search.match(n);return i?i[1]:void 0}this.define.resource("runningExperiments",t());var i="http://m.wix.com";if(window.siteHeader&&window.siteHeader.creationSource)switch(window.siteHeader.creationSource.toLocaleLowerCase()){case"web":i="http://www.wix.com";break;case"standalone":i="http://mobile.wix.com"}var s="";window.googleAnalytics&&(s=0===window.googleAnalytics.length?"":window.googleAnalytics);var o=!(window.publicModel&&window.publicModel.suppressTrackingCookies);e.atPhase(PHASES.BOOTSTRAP,function(e){console.log("deploy constants"),e.copyNamespace("Constants","Const");var t={errors:window.wixErrors,events:window.wixEvents,wixAnalytics:"editor"===window.viewMode?["UA-2117194-45"]:[],userAnalytics:["UA-2117194-15",s],enableGoogleAnalytics:o,floggerServerURL:window.serviceTopology&&window.serviceTopology.biServerUrl||"http://flogger.wixpress.com/",majorVer:2,version:("editor"!=window.viewMode?"VR":"ER")+window.client_version,siteId:window.siteId?siteId:"",userId:window.siteHeader&&window.siteHeader.userId||"00000000-0000-0000-0000-000000000000",userType:r("userType"),userLanguage:r("wixLanguage")||"unknown",wixGlobalSessionId:r("_wix_browser_sess"),editingSessionId:n("editorSessionId",!0),computerId:r("_wixCIDX")||"00000000-0000-0000-0000-000000000000",creationSource:i,wixAppId:42,sendPageTrackToWix:"editor"==window.viewMode,sendPageTrackToUser:"site"==window.viewMode,debugMode:"debug"==window.debugMode,onEvent:function(){},onError:function(e,t,r,n){("debug"==window.debugMode||"unit_test"==window.debugMode)&&window.console&&window.console.error&&console.error(e.desc,e,t,r,n)}};switch(e.createBootstrapClassInstance("LOG","bootstrap.bi.Logger",[t]),e.createBootstrapClassInstance("BI","bootstrap.bi.BI",[]),window.viewMode){case"editor":var a=0,l=0,c="";window&&window.screen&&window.screen.width&&(a=window.screen.width),window&&window.screen&&window.screen.height&&(l=window.screen.height),window&&window.editorModel&&window.editorModel.runningExperiments&&(c=JSON.stringify(editorModel.runningExperiments).replace(/[{}]/g,"").replace(/"/g,"").replace(/,/g,"|").replace(/:New/gi,":N").replace(/:Old/gi,":O"));var u={i1:a,c1:l,g1:c};LOG.reportEvent(wixEvents.EDITOR_DOM_LOADED,u);break;case"site":LOG.reportEvent(wixEvents.SITE_DOM_LOADED);break;case"preview":}}),e.atPhase(PHASES.CLASSMANAGER,function(e){e.createBootstrapClassInstance("W.Utils","bootstrap.utils.Utils",[]),e.publishBootstrapClass("WClass","bootstrap.bootstrap.WClass"),e.createBootstrapClassInstance("W.Experiments","bootstrap.managers.experiments.Experiments",[]),e.createBootstrapClassInstance("W.Classes","bootstrap.managers.classmanager.ClassManager",[]);var t=e.async(10,"Waiting for W.Classes");this.resource.getResourceValue("W.Classes",function(e){e.getClass("bootstrap.utils.Tween",function(e){define.utils("Tween:this",function(){return{Tween:e}})}),t()})}),e.atPhase(PHASES.LIBS,function(e){e.publishBootstrapClass("Element","bootstrap.extendnative.Element"),e.publishBootstrapClass("Array","bootstrap.extendnative.Array"),e.publishBootstrapClass("Async","bootstrap.utils.async.Async")}),e.atPhase(PHASES.UTILS,function(e){e.createClassInstance("W.Queue","bootstrap.utils.Queue"),e.createClassInstance("W.Commands","bootstrap.managers.commands.Commands"),e.createClassInstance("W.Events","bootstrap.managers.events.EventsManager"),e.createClassInstance("W.CommandsNew","bootstrap.managers.events.CommandsManager"),e.createClassInstance("W.InputBindings","bootstrap.managers.InputBindings");var t=e.async(10,"Waiting for W.Classes and bootstrap.utils.Hash to be defined");this.resource.getResourceValue("W.Classes",function(e){e.getClass("bootstrap.utils.Hash",function(e){define.utils("hash:this",function(){return t(),{hash:new e}})})})}),e.atPhase(PHASES.POST_DEPLOY,function(e){var t=e.async(10,"Waiting for W.Classes");this.resource.getResourceValue("W.Classes",function(e){e.loadMissingClasses(),t()})})});