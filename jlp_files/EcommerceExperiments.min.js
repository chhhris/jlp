define.experiment.Class("ecommerce.converters.EcomCartConverter.EcomTax.New",function(a,b){var c=a;c.methods({convertCart:function(a){if(!a)return this._getDummyData();var b={_type:"Cart",totalPrice:a.cart.total,subTotal:a.cart.subTotal||"",id:a.cart.cartId,items:[],hasCoupon:a.cart.hasCoupon||!1,coupon:{_type:"Coupon",couponCode:"",couponName:"",discountAmount:""},hasFees:a.cart.hasFees||!1,shipping:{_type:"ShippingDestination",shippable:!1},hasShipping:!1,tax:{_type:"Tax",cost:""},hasTax:!1,emptyCartImage:{_type:"wix:Image",title:"Cart",src:"images/empty_cart.png",width:70,height:60}};return b.itemsCount=this._populateCartItems(a.productCartItems,b.items),this._setCouponData(a,b),this._setFeesData(a,b),b},_getDummyData:function(){return{_type:"Cart",totalPrice:"",subTotal:"",id:this.NULL_CART_ID,items:[],itemsCount:0,hasCoupon:!1,coupon:{},hasFees:!1,shipping:{},hasShipping:!1,tax:{},emptyCartImage:{_type:"wix:Image",title:"Cart",src:"images/empty_cart.png",width:70,height:60}}},_setCouponData:function(a,b){var c=a.cart.coupon;b.hasCoupon&&c&&(c.name&&(b.coupon.couponName=c.name),b.coupon.discountAmount=c.discountAmount)},_setFeesData:function(a,b){var c=a.cart.fees;if(b.hasFees&&c){b.hasTax=Boolean(c.tax)||!1,b.hasShipping=Boolean(c.shipping)||!1;var d={type:c.destination.type};b.hasTax&&(b.tax.cost=c.tax.cost,d.cost=c.tax.cost),b.hasShipping&&(d.cost=c.shipping.cost),d.destination=c.destination.name,b.shipping=this._shippingConverter.convertCartShipping(d),"unresolved"==c.destination.type&&(b.preloadShipping=!0)}}})}),define.experiment.Class("ecommerce.parts_logic.EcomJoinedCartLogic.MobileEcomViews.New",function(a,b){var c=a,d=b;c.resources(d.merge(["W.Config"])),c.methods({_resolveViewName:function(a){return this.resources.W.Config.mobileConfig.isMobile()&&(a+="_mobile"),a}})}),define.experiment.Class("ecommerce.parts_logic.EcomProductsListLogic.EcomPremium.New",function(a,b){var c=a;c.methods({getDataEditingMetaInfo:function(){var a={title:this._localizer.localize("ECOM_GALLERY_PART_NAME"),hasDataSelection:!0,dataSelectionLabel:this._localizer.localize("ECOM_CHOOSE_COLLECTION_FPP"),dataEditingLabel:this._localizer.localize("ECOM_MANAGE_STORE_FPP"),zoomOpenerLabel:this._localizer.localize("ECOM_PRODUCT_PAGE_PART_NAME"),hasDataEdit:!0},b=this.resources.W.Config.getPremiumFeatures();return b.contains("HasECommerce")||(a.partDescription=this._localizer.localize("ECOM_GALLERY_PART_DESCRIPTION")+"<br/><br/>"+this._localizer.localize("ECOM_GALLERY_PART_PREMIUM_PACKAGE_DESCRIPTION")),a}})}),define.experiment.Class("ecommerce.parts_logic.EcomProductsListLogic.MobileEcomViews.New",function(a,b){var c=a;c.methods({getZoomExtraParams:function(){var a={};return this.resources.W.Config.mobileConfig.isMobile()&&(a.hideNextPrevBtns=!0),a}})}),define.experiment.Class("ecommerce.parts_logic.EcomStoreManageTrait.StoreManagerPopupWidth.New",function(a){var b=a;b.methods({getDataEditDialogParams:function(){this._addPostMessageEvent(this._handleMessageFromManage);var a=window.innerHeight-this.DIALOG_MARGIN;return a=a<this.DIALOG_MIN_HEIGHT?this.DIALOG_MIN_HEIGHT:a,{url:this._getStoreManageURL(),params:{width:992,height:a,title:this._localizer.localize("ECOM_MANAGE_ONLINE_STORE_TITLE"),description:this._localizer.localize("ECOM_MANAGE_ONLINE_STORE_DESC"),dialogSkin:"wysiwyg.editor.skins.dialogs.JustWindowDialogSkin",dialogId:"econManage",nonModal:!1},onClosedCallback:function(){this._dataProvider.reloadAllData()}.bind(this)}}})}),define.experiment.Class("ecommerce.parts_logic.ProductBundleLogic.MobileEcomViews.New",function(a,b){var c=a,d=b;c.resources(d.merge(["W.Config"])),c.methods({_resolveViewName:function(a){return a+="_mobile"},_addProxyEvents:function(a,b){a.addEvent("productOptionChanged",function(a){this._handleOptionSelectionChanged(b,a)}.bind(this)),a.addEvent("buy-product",function(){this._handleBuyProduct(b)}.bind(this)),a.addEvent("image-selected",function(a){this._handleImageSelected(b,a)}.bind(this)),a.addEvent("shareProductPage",function(a){this._socialSharer.handleShareRequest(a.params.service,b)}.bind(this)),a.addEvent("goto-product",function(a){var b=a.params.cmd;this.resources.W.Commands.executeCommand(b,null,this)}.bind(this))}})});